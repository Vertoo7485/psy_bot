# app/services/self_help/days/day_5_service.rb
module SelfHelp
  module Days
    class Day5Service < DayBaseService
      include TelegramMarkupHelper
      
      # ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹
      DAY_NUMBER = 5
      
      # Ğ¨Ğ°Ğ³Ğ¸ Ğ´Ğ½Ñ 5
      DAY_STEPS = {
        'intro' => {
          title: "ğŸƒ *Ğ”ĞµĞ½ÑŒ 5: Ğ”Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğº Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ* ğŸ§ ",
          instruction: <<~MARKDOWN
            **Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ¼Ğ¸Ñ€ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ!** ğŸ’«

            Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ²Ñ‹ Ğ¾Ñ‚ĞºÑ€Ğ¾ĞµÑ‚Ğµ Ğ´Ğ»Ñ ÑĞµĞ±Ñ ÑƒĞ´Ğ¸Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½ÑƒÑ ÑĞ²ÑĞ·ÑŒ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ‚ĞµĞ»Ğ¾Ğ¼ Ğ¸ Ğ¿ÑĞ¸Ñ…Ğ¸ĞºĞ¾Ğ¹. Ğ”Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ â€” ÑÑ‚Ğ¾ Ğ½Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ, ÑÑ‚Ğ¾ Ğ¼Ğ¾Ñ‰Ğ½Ñ‹Ğ¹ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ñ‚Ñ€Ğ°Ğ½ÑÑ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ñ Ğ¸ ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ.

            ğŸ“Š **ĞĞ°ÑƒÑ‡Ğ½Ñ‹Ğµ Ñ„Ğ°ĞºÑ‚Ñ‹ Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¸ Ğ¸ Ğ¼Ğ¾Ğ·Ğ³Ğµ:**
            â€¢ ğŸ§  ĞŸĞ¾Ğ²Ñ‹ÑˆĞ°ĞµÑ‚ Ğ½ĞµĞ¹Ñ€Ğ¾Ñ‚Ñ€Ğ¾Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ„Ğ°ĞºÑ‚Ğ¾Ñ€ Ğ¼Ğ¾Ğ·Ğ³Ğ° (BDNF) Ğ½Ğ° 30-50%
            â€¢ ğŸ¯ Ğ¡Ñ‚Ğ¸Ğ¼ÑƒĞ»Ğ¸Ñ€ÑƒĞµÑ‚ Ñ€Ğ¾ÑÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ½ĞµĞ¹Ñ€Ğ¾Ğ½Ğ¾Ğ² Ğ² Ğ³Ğ¸Ğ¿Ğ¿Ğ¾ĞºĞ°Ğ¼Ğ¿Ğµ (Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ¸ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ)
            â€¢ ğŸ˜Š Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ²Ñ‹Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ ÑĞµÑ€Ğ¾Ñ‚Ğ¾Ğ½Ğ¸Ğ½Ğ° Ğ¸ Ğ´Ğ¾Ñ„Ğ°Ğ¼Ğ¸Ğ½Ğ° Ğ½Ğ° 40-60%
            â€¢ ğŸ›¡ï¸ Ğ¡Ğ½Ğ¸Ğ¶Ğ°ĞµÑ‚ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ²Ğ¾ÑĞ¿Ğ°Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¼Ğ°Ñ€ĞºĞµÑ€Ğ¾Ğ² Ğ² Ğ¼Ğ¾Ğ·Ğ³Ğµ
            â€¢ ğŸ’¤ Ğ£Ğ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¾Ğ³Ğ¾ ÑĞ½Ğ° Ğ½Ğ° 25-30%
            â€¢ ğŸ§˜ ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ñ€ĞµÑ„Ñ€Ğ¾Ğ½Ñ‚Ğ°Ğ»ÑŒĞ½ÑƒÑ ĞºĞ¾Ñ€Ñƒ (ÑĞ°Ğ¼Ğ¾ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ Ğ¸ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ)

            ğŸ¯ **Ğ§Ñ‚Ğ¾ Ğ²Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ Ğ¾Ñ‚ ÑĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ĞµĞ¹ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸:**
            1. ğŸƒ Ğ¤Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¸ Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°
            2. ğŸ§  Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ³Ğ½Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
            3. ğŸ˜Œ Ğ•ÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ñ‚Ñ€ĞµĞ²Ğ¾Ğ³Ğ¸ Ğ¸ ÑÑ‚Ñ€ĞµÑÑĞ°
            4. ğŸ’« ĞŸĞ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸ Ğ¸ Ğ¶Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ñ‚Ğ¾Ğ½ÑƒÑĞ°
            5. ğŸ”„ ĞĞ°Ğ²Ñ‹Ğº Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ ĞºĞ°Ğº Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸ Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ğ¸
          MARKDOWN
        },
        'exercise_explanation' => {
          title: "ğŸƒ *Ğ£Ğ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ğµ: Ğ”Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ñ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸ĞµĞ¼* ğŸ§˜",
          instruction: <<~MARKDOWN
            **ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ?** ğŸ¤”

            ĞšĞ¾Ğ³Ğ´Ğ° Ğ¼Ñ‹ Ğ´Ğ²Ğ¸Ğ³Ğ°ĞµĞ¼ÑÑ Ñ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸ĞµĞ¼, Ğ¼Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°ĞµĞ¼ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ‚ĞµĞ»Ğ¾Ğ¼ Ğ¸ Ñ€Ğ°Ğ·ÑƒĞ¼Ğ¾Ğ¼:

            â€¢ ğŸ”„ **ĞĞµĞ¹Ñ€Ğ¾Ğ±Ğ¸Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚:** Ğ”Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ğ¿Ñ€Ğ°Ğ²Ğ¾Ğ³Ğ¾ Ğ¸ Ğ»ĞµĞ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑˆĞ°Ñ€Ğ¸Ğ¹
            â€¢ ğŸ§  **ĞšĞ¾Ğ³Ğ½Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ°:** Ğ£Ğ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ, Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ¸ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ° 15-20%
            â€¢ ğŸ˜Œ **Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ:** Ğ ĞµĞ³ÑƒĞ»Ğ¸Ñ€ÑƒĞµÑ‚ Ğ°Ğ¼Ğ¸Ğ³Ğ´Ğ°Ğ»Ñƒ (Ñ†ĞµĞ½Ñ‚Ñ€ ÑÑ‚Ñ€Ğ°Ñ…Ğ°) Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¾ÑÑ‚Ñ€Ğ¾Ğ²ĞºĞ¾Ğ²ÑƒÑ Ğ´Ğ¾Ğ»Ñ (Ñ‚ĞµĞ»ĞµÑĞ½Ğ¾Ğµ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ)
            â€¢ ğŸ’« **Ğ­Ğ½ĞµÑ€Ğ³ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ´ÑŠĞµĞ¼:** Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¼Ğ¸Ñ‚Ğ¾Ñ…Ğ¾Ğ½Ğ´Ñ€Ğ¸Ğ°Ğ»ÑŒĞ½ÑƒÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğ² ĞºĞ»ĞµÑ‚ĞºĞ°Ñ… Ğ¼Ğ¾Ğ·Ğ³Ğ°
            â€¢ ğŸ›¡ï¸ **ĞĞ½Ñ‚Ğ¸ÑÑ‚Ñ€ĞµÑÑĞ¾Ğ²Ñ‹Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚:** Ğ¡Ğ½Ğ¸Ğ¶Ğ°ĞµÑ‚ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ ĞºĞ¾Ñ€Ñ‚Ğ¸Ğ·Ğ¾Ğ»Ğ° Ğ½Ğ° 25-35%

            **ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ:**
            1. ğŸ§  ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ Ñ„Ğ¾ĞºÑƒÑ Ñ Ğ¼Ñ‹ÑĞ»ĞµĞ¹ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğµ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ
            2. ğŸ”„ Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼ Ğ´Ñ‹Ñ…Ğ°Ğ½Ğ¸Ğµ Ñ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸ĞµĞ¼
            3. ğŸ‘ï¸ ĞĞ°Ğ±Ğ»ÑĞ´Ğ°ĞµĞ¼ Ğ·Ğ° Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğ¼Ğ¸ Ñ€ĞµĞ°ĞºÑ†Ğ¸ÑĞ¼Ğ¸ Ğ±ĞµĞ· Ğ¾Ñ†ĞµĞ½ĞºĞ¸
            4. ğŸŒŠ ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµĞ¼ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ñ‚ĞµÑ‡ÑŒ ĞµÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾

            **Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ĞµĞµ ÑƒĞ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ğµ:** 10-30 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ»ÑĞ±Ğ¾Ğ¹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ñ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¼ Ğ¿Ñ€Ğ¸ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸ĞµĞ¼ Ğ² Ñ‚ĞµĞ»Ğµ.
            Ğ¦ĞµĞ»ÑŒ â€” Ğ½Ğµ "Ğ½Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¼Ñ‹ÑˆÑ†Ñ‹", Ğ° "Ğ¿Ğ¾Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ".
          MARKDOWN
        },
        'practice_guidance' => {
          title: "ğŸ“‹ *ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğº Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ* ğŸ“‹",
          instruction: <<~MARKDOWN
            **ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸:**

            ğŸ‘Ÿ **Ğ­ĞºĞ¸Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¸ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ¾:**
            â€¢ Ğ£Ğ´Ğ¾Ğ±Ğ½Ğ°Ñ Ğ¾Ğ´ĞµĞ¶Ğ´Ğ°, Ğ½Ğµ ÑÑ‚ĞµÑĞ½ÑÑÑ‰Ğ°Ñ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹
            â€¢ ĞĞ±ÑƒĞ²ÑŒ Ñ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞµĞ¹ Ğ°Ğ¼Ğ¾Ñ€Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¸Ğ»Ğ¸ Ğ±Ğ¾ÑĞ¸ĞºĞ¾Ğ¼
            â€¢ ĞŸÑ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ¾ 2Ã—2 Ğ¼ĞµÑ‚Ñ€Ğ° Ğ´Ğ»Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ
            â€¢ Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ÑĞ²ĞµĞ¶ĞµĞ¼Ñƒ Ğ²Ğ¾Ğ·Ğ´ÑƒÑ…Ñƒ (Ğ¾ĞºĞ½Ğ¾, Ğ±Ğ°Ğ»ĞºĞ¾Ğ½, ÑƒĞ»Ğ¸Ñ†Ğ°)

            ğŸ¯ **Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¿Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ:**
            â€¢ Ğ£ÑÑ‚Ğ°Ğ»Ğ¾ÑÑ‚ÑŒ/Ğ²ÑĞ»Ğ¾ÑÑ‚ÑŒ â†’ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ‡Ğ½Ğ°Ñ Ñ…Ğ¾Ğ´ÑŒĞ±Ğ°, Ñ‚Ğ°Ğ½Ñ†Ñ‹
            â€¢ Ğ¢Ñ€ĞµĞ²Ğ¾Ğ³Ğ°/ÑÑ‚Ñ€ĞµÑÑ â†’ Ğ¹Ğ¾Ğ³Ğ°, Ñ€Ğ°ÑÑ‚ÑĞ¶ĞºĞ°, Ñ‚Ğ°Ğ¹Ñ†Ğ·Ğ¸
            â€¢ ĞŸĞ¾Ğ´Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ â†’ ĞºĞ°Ñ€Ğ´Ğ¸Ğ¾, Ğ±ĞµĞ³, Ğ¿Ñ€Ñ‹Ğ¶ĞºĞ¸
            â€¢ ĞœÑ‹ÑˆĞµÑ‡Ğ½Ğ¾Ğµ Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ â†’ ÑÑ‚Ñ€ĞµÑ‚Ñ‡Ğ¸Ğ½Ğ³, Ğ¿Ğ¸Ğ»Ğ°Ñ‚ĞµÑ
            â€¢ ĞœĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑƒÑÑ‚Ğ°Ğ»Ğ¾ÑÑ‚ÑŒ â†’ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ° Ğ½Ğ° Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğµ

            ğŸ§  **Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ½Ğ° Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ:**
            â€¢ ĞÑ‚ĞºĞ°Ğ¶Ğ¸Ñ‚ĞµÑÑŒ Ğ¾Ñ‚ Ñ†ĞµĞ»Ğ¸ "Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ"
            â€¢ Ğ”Ğ²Ğ¸Ğ³Ğ°Ğ¹Ñ‚ĞµÑÑŒ Ñ€Ğ°Ğ´Ğ¸ ÑĞ°Ğ¼Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ, Ğ° Ğ½Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°
            â€¢ Ğ¡Ğ»ÑƒÑˆĞ°Ğ¹Ñ‚Ğµ Ñ‚ĞµĞ»Ğ¾: Ñ‡Ñ‚Ğ¾ ĞµĞ¼Ñƒ Ñ…Ğ¾Ñ‡ĞµÑ‚ÑÑ ÑĞµĞ¹Ñ‡Ğ°Ñ?
            â€¢ Ğ”Ñ‹ÑˆĞ¸Ñ‚Ğµ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¾ Ğ¸ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾ Ñ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸ĞµĞ¼
            â€¢ Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾ÑĞ²Ğ»ÑÑÑ‚ÑÑ Ğ¼Ñ‹ÑĞ»Ğ¸ Ğ¾ Ñ†ĞµĞ»Ğ¸ â†’ Ğ¼ÑĞ³ĞºĞ¾ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°Ğ¹Ñ‚ĞµÑÑŒ Ğº Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑĞ¼

            **Ğ’Ğ°Ğ¶Ğ½Ğ¾:** ĞšĞ°Ğº Ğ¸ Ğ² ÑĞ¸Ğ´ÑÑ‡ĞµĞ¹ Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ğ¸, ĞºĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ Ğº Ñ‚ĞµĞ»Ñƒ â€” ÑÑ‚Ğ¾ ÑƒĞºÑ€ĞµĞ¿Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾ÑÑ‚Ğ¸.
          MARKDOWN
        },
        'post_practice_reflection' => {
          title: "ğŸ“ *Ğ ĞµÑ„Ğ»ĞµĞºÑĞ¸Ñ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ* ğŸ“",
          instruction: <<~MARKDOWN
            **ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°! Ğ’Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ñ‚Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ!** ğŸŒŸ

            **Ğ’Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ´Ğ»Ñ Ñ€ĞµÑ„Ğ»ĞµĞºÑĞ¸Ğ¸:**

            ğŸƒ **1. Ğ Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ñ… Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑÑ…:**
            â€¢ ĞšĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¸ÑÑŒ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ Ğ² Ñ‚ĞµĞ»Ğµ Ğ¾Ñ‚ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğº ĞºĞ¾Ğ½Ñ†Ñƒ?
            â€¢ Ğ“Ğ´Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ»Ğ¸ÑÑŒ ÑĞ°Ğ¼Ñ‹Ğµ Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ñ‹Ğµ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ?
            â€¢ Ğ‘Ñ‹Ğ»Ğ¸ Ğ»Ğ¸ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ñ‹ ÑĞ¾Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ»Ğ¸ Ğ´Ğ¸ÑĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ°?
            â€¢ ĞšĞ°Ğº Ğ´Ñ‹ÑˆĞ°Ğ»Ğ¾ÑÑŒ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ?

            ğŸ§  **2. ĞĞ± ÑƒĞ¼Ğµ Ğ¸ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğ¸:**
            â€¢ Ğ£Ğ´Ğ°Ğ²Ğ°Ğ»Ğ¾ÑÑŒ Ğ»Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑŒ Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ñ… Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑÑ…?
            â€¢ ĞšĞ°ĞºĞ¸Ğµ Ğ¼Ñ‹ÑĞ»Ğ¸ Ñ‡Ğ°Ñ‰Ğµ Ğ²ÑĞµĞ³Ğ¾ Ğ¾Ñ‚Ğ²Ğ»ĞµĞºĞ°Ğ»Ğ¸?
            â€¢ ĞšĞ°Ğº Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ²Ñ‹ Ğ·Ğ°Ğ¼ĞµÑ‡Ğ°Ğ»Ğ¸, Ñ‡Ñ‚Ğ¾ Ğ¾Ñ‚Ğ²Ğ»ĞµĞºĞ»Ğ¸ÑÑŒ?
            â€¢ Ğ‘Ñ‹Ğ»Ğ¸ Ğ»Ğ¸ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ñ‹ "Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ°" (Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ)?

            ğŸ˜Š **3. Ğ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğ¸ Ğ¸ ÑĞ¼Ğ¾Ñ†Ğ¸ÑÑ…:**
            â€¢ ĞšĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ÑÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸?
            â€¢ ĞšĞ°ĞºĞ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸ Ğ²Ğ¾Ğ·Ğ½Ğ¸ĞºĞ°Ğ»Ğ¸ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ?
            â€¢ Ğ§ÑƒĞ²ÑÑ‚Ğ²ÑƒĞµÑ‚Ğµ Ğ»Ğ¸ Ğ²Ñ‹ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸?
            â€¢ Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ¾ Ñ ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¼ Ñ‚Ñ€ĞµĞ²Ğ¾Ğ³Ğ¸/ÑÑ‚Ñ€ĞµÑÑĞ°?

            ğŸ’« **Ğ—Ğ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ñ‚Ğµ:** Ğ”Ğ°Ğ¶Ğµ 10 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¸ Ñ‚ĞµĞ»Ğ¾, Ğ¸ Ñ€Ğ°Ğ·ÑƒĞ¼.
          MARKDOWN
        }
      }.freeze
      
      # Ğ¢Ğ¸Ğ¿Ñ‹ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸
      ACTIVITY_TYPES = [
        {
          name: "ĞŸÑ€Ğ¾Ğ³ÑƒĞ»ĞºĞ° Ğ½Ğ° Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğµ",
          emoji: "ğŸš¶",
          description: "ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ğ°Ñ Ğ¸Ğ»Ğ¸ Ğ±Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ñ…Ğ¾Ğ´ÑŒĞ±Ğ° Ğ½Ğ° ÑĞ²ĞµĞ¶ĞµĞ¼ Ğ²Ğ¾Ğ·Ğ´ÑƒÑ…Ğµ. ĞĞ°Ğ±Ğ»ÑĞ´Ğ°Ğ¹Ñ‚Ğµ Ğ·Ğ° Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğ¾Ğ¹, Ğ´Ñ‹ÑˆĞ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ³Ñ€ÑƒĞ´ÑŒÑ.",
          intensity: "ĞĞ¸Ğ·ĞºĞ°Ñ",
          benefits: "Ğ¡Ğ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ÑÑ‚Ñ€ĞµÑÑĞ°, ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ñ, Ğ½Ğ°ÑÑ‹Ñ‰ĞµĞ½Ğ¸Ğµ ĞºĞ¸ÑĞ»Ğ¾Ñ€Ğ¾Ğ´Ğ¾Ğ¼"
        },
        {
          name: "Ğ¡Ğ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ½Ñ†Ñ‹",
          emoji: "ğŸ’ƒ",
          description: "Ğ”Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´ Ğ»ÑĞ±Ğ¸Ğ¼ÑƒÑ Ğ¼ÑƒĞ·Ñ‹ĞºÑƒ Ğ±ĞµĞ· Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ». ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑŒÑ‚Ğµ Ñ‚ĞµĞ»Ñƒ Ğ´Ğ²Ğ¸Ğ³Ğ°Ñ‚ÑŒÑÑ Ñ‚Ğ°Ğº, ĞºĞ°Ğº Ñ…Ğ¾Ñ‡ĞµÑ‚ÑÑ.",
          intensity: "Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ",
          benefits: "Ğ’Ñ‹ÑĞ²Ğ¾Ğ±Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¹, Ñ€Ğ°Ğ´Ğ¾ÑÑ‚ÑŒ, Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸"
        },
        {
          name: "Ğ™Ğ¾Ğ³Ğ° Ğ¸ Ñ€Ğ°ÑÑ‚ÑĞ¶ĞºĞ°",
          emoji: "ğŸ§˜",
          description: "ĞœĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğµ, Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ. Ğ¤Ğ¾ĞºÑƒÑ Ğ½Ğ° Ğ´Ñ‹Ñ…Ğ°Ğ½Ğ¸Ğ¸ Ğ¸ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑÑ… Ğ² Ñ‚ĞµĞ»Ğµ.",
          intensity: "ĞĞ¸Ğ·ĞºĞ°Ñ-ÑÑ€ĞµĞ´Ğ½ÑÑ",
          benefits: "Ğ“Ğ¸Ğ±ĞºĞ¾ÑÑ‚ÑŒ, ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ñ, Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¿Ğ¾ĞºĞ¾Ğ¹ÑÑ‚Ğ²Ğ¸Ğµ"
        },
        {
          name: "Ğ¡Ğ¸Ğ»Ğ¾Ğ²Ñ‹Ğµ ÑƒĞ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ñ",
          emoji: "ğŸ‹ï¸",
          description: "ĞŸÑ€Ğ¸ÑĞµĞ´Ğ°Ğ½Ğ¸Ñ, Ğ¾Ñ‚Ğ¶Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ, Ğ¿Ğ»Ğ°Ğ½ĞºĞ°. ĞšĞ¾Ğ½Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ Ğ¼Ñ‹ÑˆÑ†.",
          intensity: "Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ-Ğ²Ñ‹ÑĞ¾ĞºĞ°Ñ",
          benefits: "Ğ£Ğ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ, ÑĞ¸Ğ»Ğ°, Ğ´Ğ¸ÑÑ†Ğ¸Ğ¿Ğ»Ğ¸Ğ½Ğ°, Ğ²Ñ‹Ğ±Ñ€Ğ¾Ñ ÑĞ½Ğ´Ğ¾Ñ€Ñ„Ğ¸Ğ½Ğ¾Ğ²"
        },
        {
          name: "ĞšĞ°Ñ€Ğ´Ğ¸Ğ¾-Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°",
          emoji: "ğŸƒ",
          description: "Ğ‘ĞµĞ³, Ğ¿Ñ€Ñ‹Ğ¶ĞºĞ¸, ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ. ĞŸĞ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ğ´ĞµÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ¸Ñ‚Ğ¼Ğ°.",
          intensity: "Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ",
          benefits: "Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ, Ğ²Ñ‹Ğ½Ğ¾ÑĞ»Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ, ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ñ‚Ñ€ĞµĞ²Ğ¾Ğ³Ğ¸, ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ ÑĞ½Ğ°"
        },
        {
          name: "Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ",
          emoji: "ğŸ¤¸",
          description: "Ğ•ÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ: Ğ¿Ñ€Ğ¸ÑĞµĞ´Ğ°Ğ½Ğ¸Ñ, Ğ½Ğ°ĞºĞ»Ğ¾Ğ½Ñ‹, Ğ¿Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ñ‹. ĞšĞ°Ğº Ğ´Ğ²Ğ¸Ğ³Ğ°ÑÑ‚ÑÑ Ğ´ĞµÑ‚Ğ¸.",
          intensity: "Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ",
          benefits: "Ğ•ÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ, Ñ€Ğ°Ğ´Ğ¾ÑÑ‚ÑŒ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ, Ñ‚ĞµĞ»ĞµÑĞ½Ğ°Ñ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ"
        }
      ].freeze
      
      # Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ² Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ
      COMMON_CHALLENGES = [
        {
          challenge: "ĞĞµÑ‚ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸ Ğ¸Ğ»Ğ¸ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸",
          emoji: "ğŸŒ€",
          solution: "ĞĞ°Ñ‡Ğ½Ğ¸Ñ‚Ğµ Ñ 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚. Ğ§Ğ°ÑÑ‚Ğ¾ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ² Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞµ. Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ°Ğ¼ÑƒÑ Ğ¿Ñ€Ğ¾ÑÑ‚ÑƒÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ â€” Ğ´Ğ°Ğ¶Ğµ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ° Ğ¿Ğ¾ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğµ."
        },
        {
          challenge: "Ğ¢ĞµĞ»Ğ¾ Ğ±Ğ¾Ğ»Ğ¸Ñ‚ Ğ¸Ğ»Ğ¸ Ğ´Ğ¸ÑĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½Ğ¾",
          emoji: "ğŸ˜£",
          solution: "Ğ¡Ğ»ÑƒÑˆĞ°Ğ¹Ñ‚Ğµ Ñ‚ĞµĞ»Ğ¾! Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ±Ğ¾Ğ»ĞµĞµ Ğ¼ÑĞ³ĞºÑƒÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ. Ğ™Ğ¾Ğ³Ğ°, Ñ€Ğ°ÑÑ‚ÑĞ¶ĞºĞ° Ğ¸Ğ»Ğ¸ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ°. Ğ¦ĞµĞ»ÑŒ â€” Ğ½Ğµ Ğ¿Ñ€ĞµĞ¾Ğ´Ğ¾Ğ»ĞµĞ½Ğ¸Ğµ, Ğ° Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸Ğµ."
        },
        {
          challenge: "ĞŸĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾ Ğ¾Ñ‚Ğ²Ğ»ĞµĞºĞ°ÑÑ‚ Ğ¼Ñ‹ÑĞ»Ğ¸",
          emoji: "ğŸ’­",
          solution: "Ğ­Ñ‚Ğ¾ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾! Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğº ÑĞºĞ¾Ñ€ÑŒ. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€Ğ°Ğ·, Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°Ñ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğº Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑĞ¼ Ğ² Ñ‚ĞµĞ»Ğµ, Ğ²Ñ‹ Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€ÑƒĞµÑ‚Ğµ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ."
        },
        {
          challenge: "ĞĞµÑ‚ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ¸Ğ»Ğ¸ Ğ¼ĞµÑÑ‚Ğ°",
          emoji: "â°",
          solution: "Ğ”Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¼Ğ¸ĞºÑ€Ğ¾Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¾Ğ¹: 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚ ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞ¹ Ğ·Ğ°Ñ€ÑĞ´ĞºĞ¸, Ñ€Ğ°ÑÑ‚ÑĞ¶ĞºĞ° Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ¿ĞµÑ€ĞµÑ€Ñ‹Ğ²Ğ°, Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºĞ° Ğ¿Ğ¾ Ğ¾Ñ„Ğ¸ÑÑƒ. Ğ’Ğ°Ğ¶Ğ½Ğ¾ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ, Ğ° Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ."
        }
      ].freeze
      
      # ===== ĞŸĞ£Ğ‘Ğ›Ğ˜Ğ§ĞĞ«Ğ• ĞœĞ•Ğ¢ĞĞ”Ğ« =====
      
      def deliver_intro
        send_message(text: DAY_STEPS['intro'][:title], parse_mode: 'Markdown')
        send_message(text: DAY_STEPS['intro'][:instruction], parse_mode: 'Markdown')
        
        # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ´Ğ»Ñ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸
        send_message(
          text: statistics_message,
          parse_mode: 'Markdown'
        )
        
        @user.set_self_help_step("day_#{DAY_NUMBER}_intro")
        store_day_data('current_step', 'intro')
        
        send_message(
          text: "Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ñ†ĞµĞ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½ÑƒÑ ÑĞ¸Ğ»Ñƒ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ?",
          reply_markup: day_5_content_markup
        )
      end
      
      def deliver_exercise
        @user.set_self_help_step("day_#{DAY_NUMBER}_exercise_in_progress")
        store_day_data('current_step', 'exercise_explanation')
        
        send_message(text: DAY_STEPS['exercise_explanation'][:title], parse_mode: 'Markdown')
        send_message(text: DAY_STEPS['exercise_explanation'][:instruction], parse_mode: 'Markdown')
        
        send_message(
          text: "ğŸƒ **Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ‚Ğ¸Ğ¿ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ ÑĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ĞµĞ¹ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸:**",
          parse_mode: 'Markdown',
          reply_markup: day_5_activity_types_markup
        )
      end
      
      # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ñ‚Ğ¸Ğ¿Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸
      def handle_activity_selection(activity_index)
        activity = ACTIVITY_TYPES[activity_index.to_i]
        
        if activity
          store_day_data('selected_activity', activity)
          
          send_message(
            text: "âœ… Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ: #{activity[:emoji]} *#{activity[:name]}*\n\n#{activity[:description]}",
            parse_mode: 'Markdown'
          )
          
          send_message(
            text: "#{activity[:emoji]} **Ğ˜Ğ½Ñ‚ĞµĞ½ÑĞ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ:** #{activity[:intensity]}\n**ĞŸĞ¾Ğ»ÑŒĞ·Ğ°:** #{activity[:benefits]}",
            parse_mode: 'Markdown'
          )
          
          # ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ğ¼ Ğº Ğ²Ñ‹Ğ±Ğ¾Ñ€Ñƒ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
          sleep(1)
          show_practice_guidance
        else
          send_message(text: "âš ï¸ ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğ¹ Ñ‚Ğ¸Ğ¿ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸. ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¸Ğ· Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ñ….")
        end
      end
      
      def show_practice_guidance
        store_day_data('current_step', 'practice_guidance')
        
        send_message(text: DAY_STEPS['practice_guidance'][:title], parse_mode: 'Markdown')
        send_message(text: DAY_STEPS['practice_guidance'][:instruction], parse_mode: 'Markdown')
        
        send_message(
          text: "â±ï¸ *Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸:*\n\nâ€¢ ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ÑÑ‰Ğ¸Ğµ: 10 Ğ¼Ğ¸Ğ½ÑƒÑ‚\nâ€¢ Ğ¡ Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğ¼: 20 Ğ¼Ğ¸Ğ½ÑƒÑ‚\nâ€¢ ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ñ‹Ğµ: 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚\n\n*ĞĞ°Ñ‡Ğ½Ğ¸Ñ‚Ğµ Ñ ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ»Ñ Ğ²Ğ°Ñ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸!*",
          parse_mode: 'Markdown',
          reply_markup: day_5_duration_markup
        )
      end
      
      def start_activity_timer(minutes)
        store_day_data('activity_duration', minutes)
        
        selected_activity = get_day_data('selected_activity') || {}
        
        timer_message = <<~MARKDOWN
          ğŸƒ *ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ!* ğŸ§˜

          â±ï¸ **Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ Ğ½Ğ° #{minutes} Ğ¼Ğ¸Ğ½ÑƒÑ‚**
          
          ğŸ¯ **Ğ’Ğ°ÑˆĞ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ:** #{selected_activity[:emoji]} #{selected_activity[:name]}
          
          ğŸ“‹ **Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:**
          1. ĞĞ°Ñ‡Ğ½Ğ¸Ñ‚Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½Ğ¾Ğ¼ Ñ‚ĞµĞ¼Ğ¿Ğµ
          2. Ğ¡Ñ„Ğ¾ĞºÑƒÑĞ¸Ñ€ÑƒĞ¹Ñ‚ĞµÑÑŒ Ğ½Ğ° Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑÑ… Ğ² Ñ‚ĞµĞ»Ğµ
          3. Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ´Ñ‹Ñ…Ğ°Ğ½Ğ¸Ğµ Ñ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸ĞµĞ¼
          4. ĞšĞ¾Ğ³Ğ´Ğ° ÑƒĞ¼ Ğ¾Ñ‚Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ÑÑ â€” Ğ¼ÑĞ³ĞºĞ¾ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°Ğ¹Ñ‚Ğµ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğº Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ğ¼ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑĞ¼
          5. Ğ”Ğ²Ğ¸Ğ³Ğ°Ğ¹Ñ‚ĞµÑÑŒ Ñ€Ğ°Ğ´Ğ¸ ÑĞ°Ğ¼Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ, Ğ° Ğ½Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°
          
          ğŸŒŸ **ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ:** ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ Ğº Ñ‚ĞµĞ»Ñƒ â€” ÑÑ‚Ğ¾ ÑƒĞºÑ€ĞµĞ¿Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ²ÑĞ·Ğ¸ Ñ€Ğ°Ğ·ÑƒĞ¼Ğ° Ğ¸ Ñ‚ĞµĞ»Ğ°!
          
          ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ½Ğ¸Ğ¶Ğµ, ĞºĞ¾Ğ³Ğ´Ğ° Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ñ‚Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ.
        MARKDOWN
        
        send_message(text: timer_message, parse_mode: 'Markdown')
        
        send_message(
          text: "â³ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ´Ğ»Ğ¸Ñ‚ÑÑ #{minutes} Ğ¼Ğ¸Ğ½ÑƒÑ‚...",
          reply_markup: day_5_activity_completion_markup
        )
      end
      
      def complete_practice
        store_day_data('practice_completed', true)
        store_day_data('completion_time', Time.current)
        
        # ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ñ€ĞµÑ„Ğ»ĞµĞºÑĞ¸Ñ
        show_post_practice_reflection
      end
      
      def show_post_practice_reflection
        store_day_data('current_step', 'post_practice_reflection')
        
        send_message(text: DAY_STEPS['post_practice_reflection'][:title], parse_mode: 'Markdown')
        send_message(text: DAY_STEPS['post_practice_reflection'][:instruction], parse_mode: 'Markdown')
        
        send_message(
          text: "ğŸ˜Š *ĞšĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ÑÑŒ Ğ²Ğ°ÑˆĞµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ?*",
          parse_mode: 'Markdown',
          reply_markup: day_5_mood_changes_markup
        )
      end
      
      def handle_mood_selection(mood_index)
        mood_options = [
          "Ğ—Ğ½Ğ°Ñ‡Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ ğŸ˜Š",
          "ĞĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ ğŸ™‚", 
          "Ğ‘ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹ ğŸ˜",
          "Ğ¥ÑƒĞ¶Ğµ (ÑƒÑÑ‚Ğ°Ğ»Ğ¾ÑÑ‚ÑŒ) ğŸ˜”"
        ]
        
        mood = mood_options[mood_index.to_i] if mood_index.to_i.between?(0, 3)
        
        if mood
          store_day_data('mood_change', mood)
          send_message(
            text: "ğŸ“Š **Ğ—Ğ°Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾:** #{mood}\n\nĞ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° Ñ‡ĞµÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ! Ğ­Ñ‚Ğ¾ Ğ²Ğ°Ğ¶Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ ÑĞ²ÑĞ·Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸ĞµĞ¼ Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸ĞµĞ¼.",
            parse_mode: 'Markdown'
          )
        end
        
        send_message(
          text: "ğŸ¤” *Ğ¡ ĞºĞ°ĞºĞ¸Ğ¼Ğ¸ Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ÑÑ‚ÑĞ¼Ğ¸ ÑÑ‚Ğ¾Ğ»ĞºĞ½ÑƒĞ»Ğ¸ÑÑŒ?*",
          parse_mode: 'Markdown',
          reply_markup: TelegramMarkupHelper.day_5_challenges_vertical_markup  # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ²ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚
        )
      end
      
      def handle_challenge_selection(challenge_index)
        challenge = COMMON_CHALLENGES[challenge_index.to_i]
        
        if challenge
          send_message(
            text: "ğŸŒ€ **#{challenge[:challenge]}**\n\n#{challenge[:solution]}",
            parse_mode: 'Markdown'
          )
        end
        
        send_message(
          text: "ğŸŒŸ ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾! Ğ’Ñ‹ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ!\n\nĞ¥Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ Ğ”ĞµĞ½ÑŒ 5?",
          reply_markup: day_5_final_completion_markup
        )
      end
      
      def complete_exercise
        activity_duration = get_day_data('activity_duration') || 10
        selected_activity = get_day_data('selected_activity') || {}
        mood_change = get_day_data('mood_change') || "ĞĞµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾"
        
        # ĞÑ‚Ğ¼ĞµÑ‡Ğ°ĞµĞ¼ Ğ´ĞµĞ½ÑŒ ĞºĞ°Ğº Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ‹Ğ¹ Ğ² Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğµ
        @user.complete_day_program(DAY_NUMBER)
        
        # Ğ¢Ğ°ĞºĞ¶Ğµ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´ Ğ´Ğ»Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
        @user.complete_self_help_day(DAY_NUMBER)
        
        # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸
        save_movement_practice_stats(activity_duration, selected_activity[:name], mood_change)
        
        completion_message = <<~MARKDOWN
          ğŸŠ *Ğ”ĞµĞ½ÑŒ 5 Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½!* ğŸŠ

          **Ğ’Ğ°ÑˆĞ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ:**
          
          ğŸƒ **ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ:**
          â€¢ â±ï¸ Ğ’Ñ€ĞµĞ¼Ñ: #{activity_duration} Ğ¼Ğ¸Ğ½ÑƒÑ‚
          â€¢ ğŸ¯ ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ: #{selected_activity[:name] || "ĞŸÑ€Ğ¾Ğ³ÑƒĞ»ĞºĞ°"}
          â€¢ ğŸ˜Š ĞĞ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ: #{mood_change}
          â€¢ ğŸ§  ĞŸÑ€Ğ¸Ğ¾Ğ±Ñ€ĞµÑ‚ĞµĞ½Ğ¸Ğµ: ĞĞ°Ğ²Ñ‹Ğº Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ ĞºĞ°Ğº Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ğ¸
          
          ğŸ“Š **ĞĞ°ÑƒÑ‡Ğ½Ñ‹Ğ¹ Ñ„Ğ°ĞºÑ‚:**
          Ğ’ÑĞµĞ³Ğ¾ 20 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ² Ğ´ĞµĞ½ÑŒ ÑĞ½Ğ¸Ğ¶Ğ°ÑÑ‚ Ñ€Ğ¸ÑĞº Ğ´ĞµĞ¿Ñ€ĞµÑÑĞ¸Ğ¸ Ğ½Ğ° 30% Ğ¸ ÑƒĞ»ÑƒÑ‡ÑˆĞ°ÑÑ‚ ĞºĞ¾Ğ³Ğ½Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ½Ğ° 15-20%.
          
          â° **Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ±ÑƒĞ´ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ñ‡ĞµÑ€ĞµĞ· 12 Ñ‡Ğ°ÑĞ¾Ğ²**
          
          Ğ’Ğ°Ñˆ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ: #{@user.progress_percentage}%
        MARKDOWN
        
        send_message(text: completion_message, parse_mode: 'Markdown')
        
        # ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµĞ¼ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ
        propose_next_day_with_restriction
      end

      def propose_next_day_with_restriction
        next_day = 6
        
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ»Ğ¸ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ
        can_start_result = @user.can_start_day?(next_day)
        
        if can_start_result == true
          message = <<~MARKDOWN
            ğŸ¯ **Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³: Ğ”ĞµĞ½ÑŒ #{next_day}**
            
            âœ… *Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ ÑĞµĞ¹Ñ‡Ğ°Ñ!*
            
            **Ğ§Ñ‚Ğ¾ Ğ²Ğ°Ñ Ğ¶Ğ´ĞµÑ‚:**
            â€¢ ğŸ˜Œ ĞÑ‚Ğ´Ñ‹Ñ… Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
            â€¢ ğŸ§˜ Ğ¢ĞµÑ…Ğ½Ğ¸ĞºĞ¸ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°
            â€¢ ğŸ’« ĞĞ°ÑƒÑ‡Ğ½Ğ¾ Ğ¾Ğ±Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Ñ€ĞµĞ»Ğ°ĞºÑĞ°Ñ†Ğ¸Ğ¸
            â€¢ ğŸ”„ Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
            
            Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ¿Ñ€ÑĞ¼Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ.
          MARKDOWN
          
          button_text = "ğŸ˜Œ ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ”ĞµĞ½ÑŒ #{next_day}"
          callback_data = "start_day_#{next_day}_from_proposal"
        else
          error_message = can_start_result.is_a?(Array) ? can_start_result.join("\n") : can_start_result
          
          message = <<~MARKDOWN
            ğŸ¯ **Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³: Ğ”ĞµĞ½ÑŒ #{next_day}**
            
            â±ï¸ *ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ:* #{error_message}
            
            **ĞŸĞ¾ĞºĞ° Ğ¶Ğ´ĞµÑ‚Ğµ, Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ:**
            â€¢ ğŸƒ ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ
            â€¢ ğŸ“ Ğ­ĞºÑĞ¿ĞµÑ€Ğ¸Ğ¼ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼Ğ¸ Ğ²Ğ¸Ğ´Ğ°Ğ¼Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸
            â€¢ ğŸ§  ĞŸĞ¾Ğ½Ğ°Ğ±Ğ»ÑĞ´Ğ°Ñ‚ÑŒ, ĞºĞ°Ğº Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ²Ğ»Ğ¸ÑĞµÑ‚ Ğ½Ğ° Ğ²Ğ°ÑˆĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ½Ñ
            â€¢ ğŸ“Š ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ (/progress)
            
            *Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ±ÑƒĞ´ĞµÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½, ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµÑ‚ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸.*
          MARKDOWN
          
          # Ğ•ÑĞ»Ğ¸ Ğ´ĞµĞ½ÑŒ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½, ĞĞ• Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½ÑƒÑ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ
          button_text = "â±ï¸ ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ Ğ”Ğ½Ñ #{next_day}"
          callback_data = "start_day_#{next_day}_from_proposal"  # ĞÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ Ñ‚Ñƒ Ğ¶Ğµ, Ğ½Ğ¾ Day6Handler Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚
        end
        
        # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
        send_message(text: message, parse_mode: 'Markdown')
        
        # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ’Ğ¡Ğ•Ğ“Ğ”Ğ, Ğ½Ğ¾ Day6Handler Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ
        send_message(
          text: "ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ:",
          reply_markup: {
            inline_keyboard: [
              [
                { 
                  text: button_text, 
                  callback_data: callback_data
                }
              ]
            ]
          }
        )
      end
      
      def resume_session
        current_state = @user.self_help_state
        
        case current_state
        when "day_#{DAY_NUMBER}_intro"
          # Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ°Ñ‡Ğ°Ğ» Ğ´ĞµĞ½ÑŒ, Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ ÑƒĞ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ğµ
          deliver_exercise
        when "day_#{DAY_NUMBER}_exercise_in_progress"
          # Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ñ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ ÑˆĞ°Ğ³Ğ°
          current_step = get_day_data('current_step')
          if current_step.present?
            handle_resume_from_step(current_step)
          else
            # Ğ•ÑĞ»Ğ¸ ÑˆĞ°Ğ³ Ğ½Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½, Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ ÑƒĞ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ğµ
            deliver_exercise
          end
        else
          # Ğ•ÑĞ»Ğ¸ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ½Ğµ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¾ Ğ¸Ğ»Ğ¸ Ğ½Ğµ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ´Ğ½Ñ 5
          log_warn("Unknown or invalid state for resume: #{current_state}")
          # ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ²Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµĞ¼ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ
          show_intro_without_state
        end
      end
      
      # ===== ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ ĞšĞĞĞŸĞĞš =====
      
      def handle_button(callback_data)
        case callback_data
        when 'start_day_5_content', 'start_day_5_from_proposal'
          deliver_exercise
          
        when 'continue_day_5_content'
          # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ğ½Ğ° ĞºĞ°ĞºĞ¾Ğ¼ ÑˆĞ°Ğ³Ğµ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ğ»ÑÑ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
          current_step = get_day_data('current_step')
          handle_resume_from_step(current_step || 'intro')
          
        when /^day_5_activity_(\d+)$/
          handle_activity_selection($1)
          
        when /^day_5_duration_(\d+)$/
          start_activity_timer($1.to_i)
          
        when 'day_5_duration_custom'
          send_message(text: "â° Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ´Ğ»Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ (Ğ¾Ñ‚ 5 Ğ´Ğ¾ 60):")
          store_day_data('awaiting_custom_duration', true)
          
        when 'day_5_activity_complete'
          complete_practice
          
        when 'day_5_activity_restart'
          deliver_exercise
          
        when 'day_5_activity_cancel'
          send_message(
            text: "âŒ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ¿Ñ€ĞµÑ€Ğ²Ğ°Ğ½Ğ°. Ğ’Ñ‹ Ğ²ÑĞµĞ³Ğ´Ğ° Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº Ğ½ĞµĞ¹ Ğ¿Ğ¾Ğ·Ğ¶Ğµ.",
            reply_markup: TelegramMarkupHelper.back_to_main_menu_markup
          )
          
        when /^day_5_mood_(\d+)$/
          handle_mood_selection($1)
          
        when 'day_5_mood_describe'
          send_message(text: "ğŸ“ ĞĞ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ, ĞºĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ÑÑŒ Ğ²Ğ°ÑˆĞµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ:")
          store_day_data('awaiting_mood_description', true)
          
        when /^day_5_challenge_(\d+)$/
          handle_challenge_selection($1)
          
        when 'day_5_no_challenges'
          send_message(text: "ğŸŒŸ ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾! Ğ£ Ğ²Ğ°Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ°ÑÑŒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸Ğ²Ğ½Ğ°Ñ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ°!")
          send_message(
            text: "Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ°ĞµĞ¼ Ğ”ĞµĞ½ÑŒ 5?",
            reply_markup: day_5_final_completion_markup
          )
          
        when 'day_5_complete_exercise', 'day_5_exercise_completed'
          complete_exercise
          
        when 'day_5_restart_practice', 'day_5_add_more_activity'
          deliver_exercise
          
        when 'day_5_make_note'
          send_message(
            text: "ğŸ“ ĞĞ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºÑƒ Ğ¾ Ğ²Ğ°ÑˆĞµĞ¹ ÑĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ĞµĞ¹ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ:\nâ€¢ Ğ§Ñ‚Ğ¾ Ğ²Ñ‹ Ğ´ĞµĞ»Ğ°Ğ»Ğ¸?\nâ€¢ ĞšĞ°ĞºĞ¸Ğµ Ğ±Ñ‹Ğ»Ğ¸ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ?\nâ€¢ Ğ§Ñ‚Ğ¾ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¸Ğ»Ğ¸ Ğ² ÑĞ²Ğ¾ĞµĞ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¸?"
          )
          store_day_data('awaiting_practice_note', true)
          
        when 'day_5_help_choose'
          send_message(
            text: "ğŸ¯ **Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ñƒ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸:**\n\nâ€¢ ĞĞ¾Ğ²Ğ¸Ñ‡ĞºĞ¸: ĞŸÑ€Ğ¾Ğ³ÑƒĞ»ĞºĞ°\nâ€¢ Ğ¢Ñ€ĞµĞ²Ğ¾Ğ³Ğ°/ÑÑ‚Ñ€ĞµÑÑ: Ğ™Ğ¾Ğ³Ğ°/Ñ€Ğ°ÑÑ‚ÑĞ¶ĞºĞ°\nâ€¢ ĞĞ¸Ğ·ĞºĞ°Ñ ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ: Ğ¢Ğ°Ğ½Ñ†Ñ‹\nâ€¢ Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ´Ğ½ÑÑ‚Ğ¸Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ñ: ĞšĞ°Ñ€Ğ´Ğ¸Ğ¾\nâ€¢ Ğ¢ĞµĞ»ĞµÑĞ½Ğ°Ñ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ: Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ\nâ€¢ Ğ¡Ğ¸Ğ»Ğ° Ğ¸ ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ: Ğ¡Ğ¸Ğ»Ğ¾Ğ²Ñ‹Ğµ ÑƒĞ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ñ",
            parse_mode: 'Markdown'
          )
          
        else
          log_warn("Unknown button callback: #{callback_data}")
          send_message(text: "ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ°Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°.")
        end
      end
      
      # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ²Ğ²Ğ¾Ğ´Ğ°
      def handle_text_input(input_text)
        # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ğ¾Ğ¹ Ğ´Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
        if get_day_data('awaiting_custom_duration')
          store_day_data('awaiting_custom_duration', false)
          
          minutes = input_text.to_i
          if minutes.between?(5, 60)
            start_activity_timer(minutes)
            return true
          else
            send_message(text: "âš ï¸ ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¾Ñ‚ 5 Ğ´Ğ¾ 60.")
            return false
          end
        end
        
        # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ñ
        if get_day_data('awaiting_mood_description')
          store_day_data('awaiting_mood_description', false)
          store_day_data('mood_description', input_text)
          
          send_message(text: "âœ… ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾!")
          send_message(
            text: "ğŸ¤” *Ğ¡ ĞºĞ°ĞºĞ¸Ğ¼Ğ¸ Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ÑÑ‚ÑĞ¼Ğ¸ ÑÑ‚Ğ¾Ğ»ĞºĞ½ÑƒĞ»Ğ¸ÑÑŒ?*",
            parse_mode: 'Markdown',
            reply_markup: day_5_challenges_markup
          )
          return true
        end
        
        # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ Ğ¾ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ
        if get_day_data('awaiting_practice_note')
          store_day_data('awaiting_practice_note', false)
          store_day_data('practice_note', input_text)
          
          send_message(text: "âœ… Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°! ĞĞ½Ğ° Ğ¿Ğ¾Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ğ°Ğ¼ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ.")
          send_message(
            text: "Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ°ĞµĞ¼ Ğ”ĞµĞ½ÑŒ 5?",
            reply_markup: day_5_final_completion_markup
          )
          return true
        end
        
        false
      end
      
      private
      
      # Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ‚ĞºĞ¸
      def day_5_content_markup
        {
          inline_keyboard: [
            [
              { text: "ğŸƒ ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ", callback_data: 'start_day_5_content' }
            ],
            [
              { text: "#{EMOJI[:back]} Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğ² Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ", callback_data: 'back_to_main_menu' }
            ]
          ]
        }.to_json
      end
      
      def day_5_activity_types_markup
        TelegramMarkupHelper.day_5_activity_types_markup
      end
      
      def day_5_duration_markup
        TelegramMarkupHelper.day_5_duration_markup
      end
      
      def day_5_activity_completion_markup
        TelegramMarkupHelper.day_5_activity_completion_markup
      end
      
      def day_5_mood_changes_markup
        TelegramMarkupHelper.day_5_mood_changes_markup
      end
      
      def day_5_challenges_markup
        TelegramMarkupHelper.day_5_challenges_markup
      end
      
      def day_5_final_completion_markup
        TelegramMarkupHelper.day_5_final_completion_markup
      end

      def show_intro_without_state
        send_message(text: DAY_STEPS['intro'][:title], parse_mode: 'Markdown')
        send_message(text: DAY_STEPS['intro'][:instruction], parse_mode: 'Markdown')
        send_message(
          text: statistics_message,
          parse_mode: 'Markdown'
        )
        send_message(
          text: "Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ñ†ĞµĞ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½ÑƒÑ ÑĞ¸Ğ»Ñƒ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ?",
          reply_markup: day_5_content_markup
        )
      end
      
      def handle_resume_from_step(step)
        case step
        when 'intro'
          deliver_intro
        when 'exercise_explanation'
          deliver_exercise
        when 'practice_guidance'
          show_practice_guidance
        when 'post_practice_reflection'
          show_post_practice_reflection
        else
          deliver_intro
        end
      end
      
      def statistics_message
        <<~MARKDOWN
          ğŸ“Š *ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ñ‚Ğ°Ğº Ğ²Ğ°Ğ¶Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ¿ÑĞ¸Ñ…Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ:*
          
          â€¢ ğŸƒ **30%** â€” ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ñ€Ğ¸ÑĞºĞ° Ğ´ĞµĞ¿Ñ€ĞµÑÑĞ¸Ğ¸ Ğ¿Ñ€Ğ¸ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾Ğ¹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸
          â€¢ ğŸ§  **20%** â€” ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ³Ğ½Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ Ğ¿Ğ¾ÑĞ»Ğµ 6 Ğ¼ĞµÑÑÑ†ĞµĞ² Ñ‚Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²Ğ¾Ğº
          â€¢ ğŸ˜Œ **40%** â€” ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ Ñ‚Ñ€ĞµĞ²Ğ¾Ğ³Ğ¸ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ½ÑÑ‚Ğ¸ÑÑ… 3 Ñ€Ğ°Ğ·Ğ° Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ
          â€¢ ğŸ’¤ **25%** â€” ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° ÑĞ½Ğ° Ñƒ Ğ»ÑĞ´ĞµĞ¹, Ğ·Ğ°Ğ½Ğ¸Ğ¼Ğ°ÑÑ‰Ğ¸Ñ…ÑÑ ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ¼
          â€¢ ğŸ§˜ **50%** â€” ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞ¼Ğ° Ğ³Ğ¸Ğ¿Ğ¿Ğ¾ĞºĞ°Ğ¼Ğ¿Ğ° (Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ) Ñƒ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ¶Ğ¸Ğ»Ñ‹Ñ… Ğ»ÑĞ´ĞµĞ¹
          â€¢ ğŸ›¡ï¸ **35%** â€” ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ²Ğ¾ÑĞ¿Ğ°Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¼Ğ°Ñ€ĞºĞµÑ€Ğ¾Ğ², ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ Ğ´ĞµĞ¿Ñ€ĞµÑÑĞ¸ĞµĞ¹
          
          *Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº: Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Harvard Medical School, NIH, ĞĞ¼ĞµÑ€Ğ¸ĞºĞ°Ğ½ÑĞºĞ¾Ğ¹ Ğ¿ÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ°ÑÑĞ¾Ñ†Ğ¸Ğ°Ñ†Ğ¸Ğ¸*
        MARKDOWN
      end
      
      def save_movement_practice_stats(duration, activity_name, mood_change)
        begin
          # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ°
          store_day_data('movement_practice_stats', {
            date: Date.current.to_s,
            duration: duration,
            activity: activity_name,
            mood_change: mood_change,
            completed: true
          })
        rescue => e
          log_error("Failed to save movement practice stats", e)
        end
      end
      
      def log_error(message, error = nil)
        Rails.logger.error "[#{self.class}] #{message} - User: #{@user.telegram_id}"
        Rails.logger.error error.message if error
      end
      
      def log_warn(message)
        Rails.logger.warn "[#{self.class}] #{message} - User: #{@user.telegram_id}"
      end
    end
  end
end