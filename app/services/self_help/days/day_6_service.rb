# app/services/self_help/days/day_6_service.rb
module SelfHelp
  module Days
    class Day6Service < DayBaseService
      include TelegramMarkupHelper
      
      # ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹
      DAY_NUMBER = 6
      
      # Ğ¨Ğ°Ğ³Ğ¸ Ğ´Ğ½Ñ 6
      DAY_STEPS = {
        'intro' => {
          title: "ğŸ˜Œ *Ğ”ĞµĞ½ÑŒ 6: Ğ˜ÑĞºÑƒÑÑÑ‚Ğ²Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ° Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ* ğŸŒ¿",
          instruction: <<~MARKDOWN
            **Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ¼Ğ¸Ñ€ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°!** ğŸŒ™

            Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ²Ñ‹ Ğ½Ğ°ÑƒÑ‡Ğ¸Ñ‚ĞµÑÑŒ Ğ½Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ "Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ", Ğ° Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸Ğ»Ñ‹ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾ Ğ¸ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾.

            ğŸ“Š **ĞĞ°ÑƒÑ‡Ğ½Ñ‹Ğµ Ñ„Ğ°ĞºÑ‚Ñ‹ Ğ¾Ğ± Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğµ:**
            â€¢ ğŸ§  Ğ’Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ° Ğ¼Ğ¾Ğ·Ğ³ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ "ÑĞµÑ‚ÑŒ Ğ¿Ğ°ÑÑĞ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ°" (default mode network), Ñ‡Ñ‚Ğ¾ ÑƒĞ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ ĞºÑ€ĞµĞ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğ½Ğ° 40-60%
            â€¢ ğŸ˜Œ ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ… ÑĞ½Ğ¸Ğ¶Ğ°ĞµÑ‚ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ ĞºĞ¾Ñ€Ñ‚Ğ¸Ğ·Ğ¾Ğ»Ğ° (Ğ³Ğ¾Ñ€Ğ¼Ğ¾Ğ½Ğ° ÑÑ‚Ñ€ĞµÑÑĞ°) Ğ½Ğ° 25-35%
            â€¢ ğŸ’¡ Ğ ĞµÑˆĞµĞ½Ğ¸Ñ, Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚Ñ‹Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°, Ğ½Ğ° 30% Ğ±Ğ¾Ğ»ĞµĞµ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹
            â€¢ ğŸ›¡ï¸ Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ… ÑĞ½Ğ¸Ğ¶Ğ°ĞµÑ‚ Ñ€Ğ¸ÑĞº ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ³Ğ¾Ñ€Ğ°Ğ½Ğ¸Ñ Ğ½Ğ° 50%
            â€¢ ğŸ’¤ 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ° Ñ€Ğ°Ğ²Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹ 2 Ñ‡Ğ°ÑĞ°Ğ¼ Ğ¿Ğ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚Ğ½Ğ¾Ğ³Ğ¾ ÑĞ½Ğ°
            â€¢ ğŸ”„ ĞÑ‚Ğ´Ñ‹Ñ… ÑƒÑĞºĞ¾Ñ€ÑĞµÑ‚ Ğ½ĞµĞ¹Ñ€Ğ¾Ğ¿Ğ»Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ - ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¼Ğ¾Ğ·Ğ³Ğ° Ğ¼ĞµĞ½ÑÑ‚ÑŒÑÑ Ğ¸ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ

            ğŸ¯ **Ğ§Ñ‚Ğ¾ Ğ²Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ Ğ¾Ñ‚ ÑĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ĞµĞ¹ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸:**
            1. ğŸ˜Œ ĞĞ°Ğ²Ñ‹Ğº Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ° Ğ±ĞµĞ· Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ° Ğ²Ğ¸Ğ½Ñ‹
            2. ğŸ”‹ Ğ­Ñ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸
            3. ğŸ§˜ Ğ£Ğ¼ĞµĞ½Ğ¸Ğµ "Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒÑÑ" Ğ¾Ñ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡
            4. ğŸ’« ĞŸĞ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ¶Ğ¸Ğ·Ğ½Ğ¸ Ğ¸ ÑƒĞ´Ğ¾Ğ²Ğ»ĞµÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸
            5. ğŸ›¡ï¸ Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ñƒ Ğ¾Ñ‚ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ³Ğ¾Ñ€Ğ°Ğ½Ğ¸Ñ
          MARKDOWN
        },
        'exercise_explanation' => {
          title: "ğŸ›‹ï¸ *Ğ£Ğ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ğµ: Ğ¡Ğ¾Ğ·Ğ½Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ…* ğŸ¯",
          instruction: <<~MARKDOWN
            **ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ…?** ğŸ¤”

            ĞšĞ¾Ğ³Ğ´Ğ° Ğ¼Ñ‹ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°ĞµĞ¼ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾, Ğ¼Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ´Ğ»Ñ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ:

            â€¢ ğŸ”„ **ĞĞµĞ¹Ñ€Ğ¾Ğ±Ğ¸Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚:** ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¿Ğ°Ñ€Ğ°ÑĞ¸Ğ¼Ğ¿Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ½ĞµÑ€Ğ²Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° (Ğ¾Ñ‚Ğ´Ñ‹Ñ… Ğ¸ Ğ¿ĞµÑ€ĞµĞ²Ğ°Ñ€Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ)
            â€¢ ğŸ§  **ĞšĞ¾Ğ³Ğ½Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ°:** Ğ£Ğ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ÑÑ ĞºĞ¾Ğ½ÑĞ¾Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ¸ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ
            â€¢ ğŸ˜Œ **Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ:** Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞ·ĞµÑ€Ğ²
            â€¢ ğŸ”‹ **Ğ­Ğ½ĞµÑ€Ğ³ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ´ÑŠĞµĞ¼:** ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½ÑÑÑ‚ÑÑ Ğ·Ğ°Ğ¿Ğ°ÑÑ‹ Ğ¿ÑĞ¸Ñ…Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸
            â€¢ ğŸ›¡ï¸ **Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ½Ñ‹Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚:** Ğ£ĞºÑ€ĞµĞ¿Ğ»ÑĞµÑ‚ÑÑ Ğ¿ÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ

            **ĞšĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°:**
            1. ğŸ¯ ĞĞ°Ğ¼ĞµÑ€ĞµĞ½Ğ½Ğ¾ Ğ²Ñ‹Ğ´ĞµĞ»ÑĞµĞ¼ Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…
            2. ğŸ§  ĞÑ‚ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ÑÑ Ğ¾Ñ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ñ… Ğ¸ Ğ±Ñ‹Ñ‚Ğ¾Ğ²Ñ‹Ñ… Ğ¼Ñ‹ÑĞ»ĞµĞ¹
            3. ğŸ‘ï¸ Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ½Ğ¾ÑĞ¸Ñ‚ ÑƒĞ´Ğ¾Ğ²Ğ¾Ğ»ÑŒÑÑ‚Ğ²Ğ¸Ğµ
            4. â° Ğ£Ğ²Ğ°Ğ¶Ğ°ĞµĞ¼ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ ĞºĞ°Ğº Ğ²Ğ°Ğ¶Ğ½ÑƒÑ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ Ñ ÑĞ°Ğ¼Ğ¸Ğ¼ ÑĞ¾Ğ±Ğ¾Ğ¹

            **Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ĞµĞµ ÑƒĞ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ğµ:** 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ»ÑĞ±Ğ¾Ğ¹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¸Ğ½Ğ¾ÑĞ¸Ñ‚ Ğ²Ğ°Ğ¼ ÑƒĞ´Ğ¾Ğ²Ğ¾Ğ»ÑŒÑÑ‚Ğ²Ğ¸Ğµ Ğ¸ Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ»ĞµĞ½Ğ¸Ğµ.
            Ğ¦ĞµĞ»ÑŒ â€” Ğ½Ğµ "Ğ¿Ñ€Ğ¾Ğ²ĞµÑÑ‚Ğ¸ Ğ²Ñ€ĞµĞ¼Ñ", Ğ° "Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¸Ğ»Ñ‹".
          MARKDOWN
        },
        'practice_guidance' => {
          title: "ğŸ“‹ *ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğº Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°* ğŸŒŸ",
          instruction: <<~MARKDOWN
            **ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸:**

            ğŸ  **ĞŸÑ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ¾ Ğ¸ Ğ°Ñ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ğ°:**
            â€¢ Ğ£ÑÑ‚Ğ½Ğ¾Ğµ, ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½Ğ¾Ğµ Ğ¼ĞµÑÑ‚Ğ¾
            â€¢ ĞŸÑ€Ğ¸Ğ³Ğ»ÑƒÑˆĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ²ĞµÑ‚ Ğ¸Ğ»Ğ¸ ĞµÑÑ‚ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ Ğ¾ÑĞ²ĞµÑ‰ĞµĞ½Ğ¸Ğµ
            â€¢ ĞšĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½Ğ°Ñ Ñ‚ĞµĞ¼Ğ¿ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°
            â€¢ ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ğ¾Ñ‚Ğ²Ğ»ĞµĞºĞ°ÑÑ‰Ğ¸Ñ… Ñ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¾Ğ²

            ğŸ“± **Ğ¦Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ñ Ğ´ĞµÑ‚Ğ¾ĞºÑĞ¸ĞºĞ°Ñ†Ğ¸Ñ:**
            â€¢ Ğ’Ñ‹ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ
            â€¢ ĞÑ‚Ğ»Ğ¾Ğ¶Ğ¸Ñ‚Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğµ Ğ³Ğ°Ğ´Ğ¶ĞµÑ‚Ñ‹
            â€¢ Ğ¡Ğ¾Ğ¾Ğ±Ñ‰Ğ¸Ñ‚Ğµ Ğ±Ğ»Ğ¸Ğ·ĞºĞ¸Ğ¼, Ñ‡Ñ‚Ğ¾ Ğ²Ñ‹ Ğ·Ğ°Ğ½ÑÑ‚Ñ‹ ÑĞ¾Ğ±Ğ¾Ğ¹
            â€¢ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²ÑƒÑ Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ

            ğŸ§  **Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ½Ğ° Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ:**
            â€¢ ĞÑ‚ĞºĞ°Ğ¶Ğ¸Ñ‚ĞµÑÑŒ Ğ¾Ñ‚ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ° Ğ²Ğ¸Ğ½Ñ‹ Ğ·Ğ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…
            â€¢ Ğ Ğ°Ğ·Ñ€ĞµÑˆĞ¸Ñ‚Ğµ ÑĞµĞ±Ğµ Ğ½Ğ°ÑĞ»Ğ°Ğ¶Ğ´Ğ°Ñ‚ÑŒÑÑ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ¼
            â€¢ Ğ¡Ñ„Ğ¾ĞºÑƒÑĞ¸Ñ€ÑƒĞ¹Ñ‚ĞµÑÑŒ Ğ½Ğ° Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑÑ…, Ğ° Ğ½Ğµ Ğ½Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğµ
            â€¢ Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾ÑĞ²Ğ»ÑÑÑ‚ÑÑ Ğ¼Ñ‹ÑĞ»Ğ¸ Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ â†’ Ğ¼ÑĞ³ĞºĞ¾ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°Ğ¹Ñ‚ĞµÑÑŒ Ğº Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ñƒ

            **Ğ’Ğ°Ğ¶Ğ½Ğ¾:** ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ… â€” ÑÑ‚Ğ¾ Ğ½Ğ°Ğ²Ñ‹Ğº, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ²Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ.
          MARKDOWN
        },
        'post_practice_reflection' => {
          title: "ğŸ“ *Ğ ĞµÑ„Ğ»ĞµĞºÑĞ¸Ñ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°* ğŸ’­",
          instruction: <<~MARKDOWN
            **ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°! Ğ’Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡Ñ‚Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°!** ğŸŒŸ

            **Ğ’Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ´Ğ»Ñ Ñ€ĞµÑ„Ğ»ĞµĞºÑĞ¸Ğ¸:**

            ğŸ˜Œ **1. Ğ Ñ‚ĞµĞ»ĞµÑĞ½Ñ‹Ñ… Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸ÑÑ…:**
            â€¢ ĞšĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¸ÑÑŒ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ Ğ² Ñ‚ĞµĞ»Ğµ Ğ¾Ñ‚ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğº ĞºĞ¾Ğ½Ñ†Ñƒ?
            â€¢ Ğ“Ğ´Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ»Ğ¸ÑÑŒ ÑĞ°Ğ¼Ñ‹Ğµ Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ñ‹Ğµ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ»ĞµĞ½Ğ¸Ñ?
            â€¢ Ğ‘Ñ‹Ğ»Ğ¸ Ğ»Ğ¸ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ñ‹ Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ñ Ğ¸Ğ»Ğ¸ Ğ´Ğ¸ÑĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ°?
            â€¢ ĞšĞ°Ğº Ğ´Ñ‹ÑˆĞ°Ğ»Ğ¾ÑÑŒ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°?

            ğŸ§  **2. ĞĞ± ÑƒĞ¼Ğµ Ğ¸ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğ¸:**
            â€¢ Ğ£Ğ´Ğ°Ğ²Ğ°Ğ»Ğ¾ÑÑŒ Ğ»Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑŒ Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğµ?
            â€¢ ĞšĞ°ĞºĞ¸Ğµ Ğ¼Ñ‹ÑĞ»Ğ¸ Ñ‡Ğ°Ñ‰Ğµ Ğ²ÑĞµĞ³Ğ¾ Ğ¾Ñ‚Ğ²Ğ»ĞµĞºĞ°Ğ»Ğ¸?
            â€¢ ĞšĞ°Ğº Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ²Ñ‹ Ğ·Ğ°Ğ¼ĞµÑ‡Ğ°Ğ»Ğ¸, Ñ‡Ñ‚Ğ¾ Ğ¾Ñ‚Ğ²Ğ»ĞµĞºĞ»Ğ¸ÑÑŒ Ğ½Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ğ¸Ğ»Ğ¸ Ğ±Ñ‹Ñ‚?
            â€¢ Ğ‘Ñ‹Ğ»Ğ¸ Ğ»Ğ¸ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ñ‹ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ Ğ² Ğ¾Ñ‚Ğ´Ñ‹Ñ…?

            ğŸŒŸ **3. Ğ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğ¸ Ğ¸ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸:**
            â€¢ ĞšĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ÑÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°?
            â€¢ ĞšĞ°ĞºĞ¸Ğµ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¸ Ğ²Ğ¾Ğ·Ğ½Ğ¸ĞºĞ°Ğ»Ğ¸ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸?
            â€¢ Ğ§ÑƒĞ²ÑÑ‚Ğ²ÑƒĞµÑ‚Ğµ Ğ»Ğ¸ Ğ²Ñ‹ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸?
            â€¢ Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ¾ Ñ ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¼ Ñ‚Ñ€ĞµĞ²Ğ¾Ğ³Ğ¸/ÑÑ‚Ñ€ĞµÑÑĞ°?
          MARKDOWN
        }
      }.freeze
      
      # Ğ¢Ğ¸Ğ¿Ñ‹ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°
      REST_TYPES = [
        {
          name: "Ğ Ğ°ÑÑĞ»Ğ°Ğ±Ğ»ÑÑÑ‰Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€",
          emoji: "ğŸ¬",
          description: "Ğ›ÑĞ±Ğ¸Ğ¼Ñ‹Ğ¹ Ñ„Ğ¸Ğ»ÑŒĞ¼, ÑĞµÑ€Ğ¸Ğ°Ğ», Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ĞºĞ¸Ğ½Ğ¾. ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑŒÑ‚Ğµ ÑĞµĞ±Ğµ Ğ¿Ğ¾Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒÑÑ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ.",
          duration: "30-60 Ğ¼Ğ¸Ğ½ÑƒÑ‚",
          benefits: "Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ²Ğ¾Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ, Ğ¾Ñ‚Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ Ğ¼Ñ‹ÑĞ»ĞµĞ¹"
        },
        {
          name: "Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ ÑƒĞ´Ğ¾Ğ²Ğ¾Ğ»ÑŒÑÑ‚Ğ²Ğ¸Ñ",
          emoji: "ğŸ“š",
          description: "ĞšĞ½Ğ¸Ğ³Ğ°, Ğ¶ÑƒÑ€Ğ½Ğ°Ğ», ÑÑ‚Ğ°Ñ‚ÑŒĞ¸. Ğ§Ğ¸Ñ‚Ğ°Ğ¹Ñ‚Ğµ Ñ‚Ğ¾, Ñ‡Ñ‚Ğ¾ Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ, Ğ±ĞµĞ· Ñ†ĞµĞ»Ğ¸ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ.",
          duration: "20-40 Ğ¼Ğ¸Ğ½ÑƒÑ‚",
          benefits: "ĞŸĞ¾Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ, Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ ĞºÑ€ÑƒĞ³Ğ¾Ğ·Ğ¾Ñ€Ğ°, ÑƒÑĞ¿Ğ¾ĞºĞ¾ĞµĞ½Ğ¸Ğµ"
        },
        {
          name: "ĞœÑƒĞ·Ñ‹ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ‚ĞµÑ€Ğ°Ğ¿Ğ¸Ñ",
          emoji: "ğŸµ",
          description: "Ğ›ÑĞ±Ğ¸Ğ¼Ñ‹Ğ¹ Ğ°Ğ»ÑŒĞ±Ğ¾Ğ¼, ĞºĞ»Ğ°ÑÑĞ¸ĞºĞ°, Ğ·Ğ²ÑƒĞºĞ¸ Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ñ‹. Ğ¡Ğ»ÑƒÑˆĞ°Ğ¹Ñ‚Ğµ Ñ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ñ‹Ğ¼Ğ¸ Ğ³Ğ»Ğ°Ğ·Ğ°Ğ¼Ğ¸.",
          duration: "15-30 Ğ¼Ğ¸Ğ½ÑƒÑ‚",
          benefits: "Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€ĞµĞ³ÑƒĞ»ÑÑ†Ğ¸Ñ, Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ»ĞµĞ½Ğ¸Ğµ Ğ½ĞµÑ€Ğ²Ğ½Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹"
        },
        {
          name: "Ğ¡Ğ¿Ğ°-Ğ¿Ñ€Ğ¾Ñ†ĞµĞ´ÑƒÑ€Ñ‹ Ğ´Ğ¾Ğ¼Ğ°",
          emoji: "ğŸ›€",
          description: "Ğ¢ĞµĞ¿Ğ»Ğ°Ñ Ğ²Ğ°Ğ½Ğ½Ğ°, Ğ¼Ğ°ÑĞºĞ¸, Ğ°Ñ€Ğ¾Ğ¼Ğ°Ñ‚ĞµÑ€Ğ°Ğ¿Ğ¸Ñ. Ğ£Ñ…Ğ¾Ğ´ Ğ·Ğ° Ñ‚ĞµĞ»Ğ¾Ğ¼ ĞºĞ°Ğº Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ.",
          duration: "20-40 Ğ¼Ğ¸Ğ½ÑƒÑ‚",
          benefits: "Ğ¡Ğ½ÑÑ‚Ğ¸Ğµ Ğ¼Ñ‹ÑˆĞµÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ñ, ÑĞµĞ½ÑĞ¾Ñ€Ğ½Ğ¾Ğµ ÑƒĞ´Ğ¾Ğ²Ğ¾Ğ»ÑŒÑÑ‚Ğ²Ğ¸Ğµ"
        },
        {
          name: "Ğ¢Ğ²Ğ¾Ñ€Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ",
          emoji: "ğŸ¨",
          description: "Ğ Ğ¸ÑĞ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, Ñ€Ğ°ÑĞºÑ€Ğ°ÑĞºĞ¸, Ñ€ÑƒĞºĞ¾Ğ´ĞµĞ»Ğ¸Ğµ. ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ²Ğ°Ğ¶Ğ½ĞµĞµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°.",
          duration: "30-60 Ğ¼Ğ¸Ğ½ÑƒÑ‚",
          benefits: "ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¾Ğ²Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ, ÑĞ°Ğ¼Ğ¾Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ, ÑƒĞ´Ğ¾Ğ²Ğ»ĞµÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ¸Ğµ"
        },
        {
          name: "Ğ¡Ğ¾Ğ½ Ğ¸Ğ»Ğ¸ Ğ´Ñ€ĞµĞ¼Ğ¾Ñ‚Ğ°",
          emoji: "ğŸ’¤",
          description: "ĞšĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ ÑĞ¾Ğ½, Ğ¼ĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ»ĞµĞ¶Ğ°. Ğ”Ğ°Ğ¹Ñ‚Ğµ Ñ‚ĞµĞ»Ñƒ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ.",
          duration: "20-40 Ğ¼Ğ¸Ğ½ÑƒÑ‚",
          benefits: "Ğ¤Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ, ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ³Ğ½Ğ¸Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹"
        }
      ].freeze
      
      # Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ² Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°
      COMMON_CHALLENGES = [
        {
          challenge: "Ğ§ÑƒĞ²ÑÑ‚Ğ²Ğ¾ Ğ²Ğ¸Ğ½Ñ‹ Ğ·Ğ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…",
          emoji: "ğŸ˜”",
          solution: "ĞĞ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ñ‚Ğµ ÑĞµĞ±Ğµ: Ğ¾Ñ‚Ğ´Ñ‹Ñ… â€” ÑÑ‚Ğ¾ Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ñ Ğ² Ğ²Ğ°ÑˆÑƒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ. ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ… Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½ĞµĞµ."
        },
        {
          challenge: "ĞĞµ Ğ¼Ğ¾Ğ³Ñƒ Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğµ Ğ¼Ñ‹ÑĞ»Ğ¸",
          emoji: "ğŸ’­",
          solution: "Ğ—Ğ°Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ""Ğ±ÑƒĞ¼Ğ°Ğ³Ñƒ Ğ´Ğ»Ñ Ğ¼Ñ‹ÑĞ»ĞµĞ¹"" - Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ Ğ²ÑĞµ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğµ Ğ¸Ğ´ĞµĞ¸, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¾ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ³Ğ¾Ğ»Ğ¾Ğ²Ñƒ. Ğ—Ğ°Ñ‚ĞµĞ¼ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°Ğ¹Ñ‚ĞµÑÑŒ Ğº Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ñƒ."
        },
        {
          challenge: "ĞĞµÑ‚ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ½Ğ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…",
          emoji: "â°",
          solution: "ĞĞ°Ñ‡Ğ½Ğ¸Ñ‚Ğµ Ñ 10 Ğ¼Ğ¸Ğ½ÑƒÑ‚. ĞÑ‚Ğ´Ñ‹Ñ… Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¼Ğ¸ĞºÑ€Ğ¾-Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¾Ğ¹: 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ñ‡Ğ°Ñ Ğ² Ñ‚Ğ¸ÑˆĞ¸Ğ½Ğµ, 10 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ¼ÑƒĞ·Ñ‹ĞºĞ¸, 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ."
        },
        {
          challenge: "ĞĞµ Ğ·Ğ½Ğ°Ñ, ĞºĞ°Ğº Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°Ñ‚ÑŒ",
          emoji: "ğŸ¤”",
          solution: "Ğ­ĞºÑĞ¿ĞµÑ€Ğ¸Ğ¼ĞµĞ½Ñ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ! ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ²Ğ¸Ğ´Ñ‹ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°. Ğ§Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ½Ğ¾ÑĞ¸Ñ‚ Ğ²Ğ°Ğ¼ ÑƒĞ´Ğ¾Ğ²Ğ¾Ğ»ÑŒÑÑ‚Ğ²Ğ¾ Ğ² Ğ´ĞµÑ‚ÑÑ‚Ğ²Ğµ? Ğ’ĞµÑ€Ğ½Ğ¸Ñ‚ĞµÑÑŒ Ğº ÑÑ‚Ğ¾Ğ¼Ñƒ."
        }
      ].freeze
      
      # ===== ĞŸĞ£Ğ‘Ğ›Ğ˜Ğ§ĞĞ«Ğ• ĞœĞ•Ğ¢ĞĞ”Ğ« =====
      
      def deliver_intro
        send_message(text: DAY_STEPS['intro'][:title], parse_mode: 'Markdown')
        send_message(text: DAY_STEPS['intro'][:instruction], parse_mode: 'Markdown')
        
        # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ´Ğ»Ñ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸
        send_message(
          text: statistics_message,
          parse_mode: 'Markdown'
        )
        
        @user.set_self_help_step("day_#{DAY_NUMBER}_intro")
        store_day_data('current_step', 'intro')
        
        send_message(
          text: "Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ Ğ¾ÑĞ²Ğ¾Ğ¸Ñ‚ÑŒ Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ¾ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°?",
          reply_markup: day_6_content_markup
        )
      end
      
      def deliver_exercise
        @user.set_self_help_step("day_#{DAY_NUMBER}_exercise_in_progress")
        store_day_data('current_step', 'exercise_explanation')
        
        send_message(text: DAY_STEPS['exercise_explanation'][:title], parse_mode: 'Markdown')
        send_message(text: DAY_STEPS['exercise_explanation'][:instruction], parse_mode: 'Markdown')
        
        send_message(
          text: "ğŸ˜Œ **Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ‚Ğ¸Ğ¿ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ° Ğ´Ğ»Ñ ÑĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ĞµĞ¹ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸:**",
          parse_mode: 'Markdown',
          reply_markup: day_6_rest_types_markup
        )
      end
      
      # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ñ‚Ğ¸Ğ¿Ğ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°
      def handle_rest_selection(rest_index)
        rest_type = REST_TYPES[rest_index.to_i]
        
        if rest_type
          store_day_data('selected_rest_type', rest_type)
          
          send_message(
            text: "âœ… Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½ Ğ¾Ñ‚Ğ´Ñ‹Ñ…: #{rest_type[:emoji]} *#{rest_type[:name]}*\n\n#{rest_type[:description]}",
            parse_mode: 'Markdown'
          )
          
          send_message(
            text: "#{rest_type[:emoji]} **Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ:** #{rest_type[:duration]}\n**ĞŸĞ¾Ğ»ÑŒĞ·Ğ°:** #{rest_type[:benefits]}",
            parse_mode: 'Markdown'
          )
          
          # ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ğ¼ Ğº Ğ²Ñ‹Ğ±Ğ¾Ñ€Ñƒ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
          sleep(1)
          show_practice_guidance
        else
          send_message(text: "âš ï¸ ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğ¹ Ñ‚Ğ¸Ğ¿ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°. ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¸Ğ· Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ñ….")
        end
      end
      
      def show_practice_guidance
        store_day_data('current_step', 'practice_guidance')
        
        send_message(text: DAY_STEPS['practice_guidance'][:title], parse_mode: 'Markdown')
        send_message(text: DAY_STEPS['practice_guidance'][:instruction], parse_mode: 'Markdown')
        
        send_message(
          text: "â±ï¸ *Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°:*\n\nâ€¢ ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾: 20 Ğ¼Ğ¸Ğ½ÑƒÑ‚\nâ€¢ ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾: 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚\nâ€¢ Ğ˜Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾: 45-60 Ğ¼Ğ¸Ğ½ÑƒÑ‚\n\n*ĞĞ°Ñ‡Ğ½Ğ¸Ñ‚Ğµ Ñ ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ»Ñ Ğ²Ğ°Ñ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸!*",
          parse_mode: 'Markdown',
          reply_markup: day_6_duration_markup
        )
      end
      
      def start_rest_timer(minutes)
        store_day_data('rest_duration', minutes)
        
        selected_rest = get_day_data('selected_rest_type') || {}
        
        timer_message = <<~MARKDOWN
          ğŸ˜Œ *ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°!* ğŸŒ™

          â±ï¸ **Ğ¢Ğ°Ğ¹Ğ¼ĞµÑ€ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ Ğ½Ğ° #{minutes} Ğ¼Ğ¸Ğ½ÑƒÑ‚**
          
          ğŸ¯ **Ğ’Ğ°Ñˆ Ğ²Ğ¸Ğ´ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°:** #{selected_rest[:emoji]} #{selected_rest[:name]}
          
          ğŸ“‹ **ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°:**
          1. Ğ’Ñ‹ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ğ²ÑĞµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
          2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½ÑƒÑ Ğ°Ñ‚Ğ¼Ğ¾ÑÑ„ĞµÑ€Ñƒ
          3. ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑŒÑ‚Ğµ ÑĞµĞ±Ğµ Ğ½Ğ°ÑĞ»Ğ°Ğ¶Ğ´Ğ°Ñ‚ÑŒÑÑ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ¼
          4. Ğ•ÑĞ»Ğ¸ ÑƒĞ¼ Ğ¾Ñ‚Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ÑÑ â†’ Ğ¼ÑĞ³ĞºĞ¾ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°Ğ¹Ñ‚Ğµ Ğ²Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ Ğº Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ñƒ
          5. ĞŸĞ¾Ğ¼Ğ½Ğ¸Ñ‚Ğµ: Ğ²Ñ‹ Ğ·Ğ°ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚Ğµ ÑÑ‚Ğ¾Ñ‚ Ğ¾Ñ‚Ğ´Ñ‹Ñ…!
          
          ğŸŒŸ **ĞĞ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ:** ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ… â€” ÑÑ‚Ğ¾ Ğ½Ğµ Ñ€Ğ¾ÑĞºĞ¾ÑˆÑŒ, Ğ° Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ´Ğ»Ñ Ğ¿ÑĞ¸Ñ…Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ!
          
          ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ½Ğ¸Ğ¶Ğµ, ĞºĞ¾Ğ³Ğ´Ğ° Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ñ‚Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ.
        MARKDOWN
        
        send_message(text: timer_message, parse_mode: 'Markdown')
        
        send_message(
          text: "â³ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ° Ğ´Ğ»Ğ¸Ñ‚ÑÑ #{minutes} Ğ¼Ğ¸Ğ½ÑƒÑ‚...",
          reply_markup: day_6_rest_completion_markup
        )
      end
      
      def complete_practice
        store_day_data('practice_completed', true)
        store_day_data('completion_time', Time.current)
        
        # ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ñ€ĞµÑ„Ğ»ĞµĞºÑĞ¸Ñ
        show_post_practice_reflection
      end
      
      def show_post_practice_reflection
        store_day_data('current_step', 'post_practice_reflection')
        
        send_message(text: DAY_STEPS['post_practice_reflection'][:title], parse_mode: 'Markdown')
        send_message(text: DAY_STEPS['post_practice_reflection'][:instruction], parse_mode: 'Markdown')
        
        send_message(
          text: "ğŸ˜Š *ĞšĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ÑÑŒ Ğ²Ğ°ÑˆĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°?*",
          parse_mode: 'Markdown',
          reply_markup: day_6_state_changes_markup
        )
      end
      
      def handle_state_selection(state_index)
        state_options = [
          "Ğ—Ğ½Ğ°Ñ‡Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ, Ñ‡ÑƒĞ²ÑÑ‚Ğ²ÑƒÑ Ğ¿Ñ€Ğ¸Ğ»Ğ¸Ğ² ÑĞ¸Ğ» ğŸ˜Š",
          "ĞĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ, Ğ±Ğ¾Ğ»ĞµĞµ Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ»ĞµĞ½(Ğ°) ğŸ™‚", 
          "Ğ‘ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹, Ğ½Ğ¾ Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµĞ»(Ğ°) Ğ²Ñ€ĞµĞ¼Ñ ğŸ˜",
          "Ğ£ÑÑ‚Ğ°Ğ»(Ğ°) Ğ¸Ğ»Ğ¸ Ğ½Ğµ ÑĞ¼Ğ¾Ğ³(Ğ»Ğ°) Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ¸Ñ‚ÑŒÑÑ ğŸ˜”"
        ]
        
        state = state_options[state_index.to_i] if state_index.to_i.between?(0, 3)
        
        if state
          store_day_data('state_change', state)
          send_message(
            text: "ğŸ“Š **Ğ—Ğ°Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾:** #{state}\n\nĞ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° Ñ‡ĞµÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ! Ğ­Ñ‚Ğ¾ Ğ²Ğ°Ğ¶Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ Ğ²Ğ°ÑˆĞ¸Ñ… Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ½Ğ¾ÑÑ‚ĞµĞ¹ Ğ² Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğµ.",
            parse_mode: 'Markdown'
          )
        end
        
        send_message(
          text: "ğŸ¤” *Ğ¡ ĞºĞ°ĞºĞ¸Ğ¼Ğ¸ Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ÑÑ‚ÑĞ¼Ğ¸ ÑÑ‚Ğ¾Ğ»ĞºĞ½ÑƒĞ»Ğ¸ÑÑŒ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°?*",
          parse_mode: 'Markdown',
          reply_markup: day_6_challenges_markup
        )
      end
      
      def handle_challenge_selection(challenge_index)
        challenge = COMMON_CHALLENGES[challenge_index.to_i]
        
        if challenge
          send_message(
            text: "ğŸŒ€ **#{challenge[:challenge]}**\n\n#{challenge[:solution]}",
            parse_mode: 'Markdown'
          )
        end
        
        send_message(
          text: "ğŸŒŸ ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾! Ğ’Ñ‹ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°!\n\nĞ¥Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ Ğ”ĞµĞ½ÑŒ 6?",
          reply_markup: day_6_final_completion_markup
        )
      end
      
      def complete_exercise
        rest_duration = get_day_data('rest_duration') || 30
        selected_rest = get_day_data('selected_rest_type') || {}
        state_change = get_day_data('state_change') || "ĞĞµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¾"
        
        # ĞÑ‚Ğ¼ĞµÑ‡Ğ°ĞµĞ¼ Ğ´ĞµĞ½ÑŒ ĞºĞ°Ğº Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ½Ñ‹Ğ¹ Ğ² Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğµ
        @user.complete_day_program(DAY_NUMBER)
        
        # Ğ¢Ğ°ĞºĞ¶Ğµ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´ Ğ´Ğ»Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
        @user.complete_self_help_day(DAY_NUMBER)
        
        # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸
        save_rest_practice_stats(rest_duration, selected_rest[:name], state_change)
        
        completion_message = <<~MARKDOWN
          ğŸŠ *Ğ”ĞµĞ½ÑŒ 6 Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½!* ğŸŠ

          **Ğ’Ğ°ÑˆĞ¸ Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ:**
          
          ğŸ˜Œ **ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°:**
          â€¢ â±ï¸ Ğ’Ñ€ĞµĞ¼Ñ: #{rest_duration} Ğ¼Ğ¸Ğ½ÑƒÑ‚
          â€¢ ğŸ¯ Ğ’Ğ¸Ğ´ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°: #{selected_rest[:name] || "ĞÑ‚Ğ´Ñ‹Ñ… Ğ¿Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ñƒ"}
          â€¢ ğŸ˜Š Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ: #{state_change}
          â€¢ ğŸ§  ĞŸÑ€Ğ¸Ğ¾Ğ±Ñ€ĞµÑ‚ĞµĞ½Ğ¸Ğµ: ĞĞ°Ğ²Ñ‹Ğº ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
          
          ğŸ“Š **ĞĞ°ÑƒÑ‡Ğ½Ñ‹Ğ¹ Ñ„Ğ°ĞºÑ‚:**
          Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğ¹ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ… ÑĞ½Ğ¸Ğ¶Ğ°ĞµÑ‚ Ñ€Ğ¸ÑĞº ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ³Ğ¾Ñ€Ğ°Ğ½Ğ¸Ñ Ğ½Ğ° 50% Ğ¸ Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞ°ĞµÑ‚ ÑƒĞ´Ğ¾Ğ²Ğ»ĞµÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¶Ğ¸Ğ·Ğ½ÑŒÑ Ğ½Ğ° 40%.
          
          â° **Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ±ÑƒĞ´ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ñ‡ĞµÑ€ĞµĞ· 12 Ñ‡Ğ°ÑĞ¾Ğ²**
          
          Ğ’Ğ°Ñˆ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ: #{@user.progress_percentage}%
        MARKDOWN
        
        send_message(text: completion_message, parse_mode: 'Markdown')
        
        # ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµĞ¼ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ
        propose_next_day_with_restriction
      end

      def propose_next_day_with_restriction
        next_day = 7
        
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ»Ğ¸ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ
        can_start_result = @user.can_start_day?(next_day)
        
        if can_start_result == true
          message = <<~MARKDOWN
            ğŸ¯ **Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³: Ğ”ĞµĞ½ÑŒ #{next_day}**
            
            âœ… *Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ ÑĞµĞ¹Ñ‡Ğ°Ñ!*
            
            **Ğ§Ñ‚Ğ¾ Ğ²Ğ°Ñ Ğ¶Ğ´ĞµÑ‚:**
            â€¢ ğŸ“ ĞŸĞ¾Ğ´Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ¸Ñ‚Ğ¾Ğ³Ğ¾Ğ² Ğ½ĞµĞ´ĞµĞ»Ğ¸
            â€¢ ğŸ§  Ğ ĞµÑ„Ğ»ĞµĞºÑĞ¸Ñ Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ¿Ñ‹Ñ‚Ğ°
            â€¢ ğŸ¯ ĞŸĞ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ñ†ĞµĞ»ĞµĞ¹ Ğ½Ğ° Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞµ
            â€¢ ğŸŒŸ Ğ§ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ°ÑˆĞ¸Ñ… Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğ¹
            
            Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ¿Ñ€ÑĞ¼Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ.
          MARKDOWN
          
          button_text = "ğŸ“ ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ”ĞµĞ½ÑŒ #{next_day}"
          callback_data = "start_day_#{next_day}_from_proposal"
        else
          error_message = can_start_result.is_a?(Array) ? can_start_result.join("\n") : can_start_result
          
          message = <<~MARKDOWN
            ğŸ¯ **Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³: Ğ”ĞµĞ½ÑŒ #{next_day}**
            
            â±ï¸ *ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ:* #{error_message}
            
            **ĞŸĞ¾ĞºĞ° Ğ¶Ğ´ĞµÑ‚Ğµ, Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ:**
            â€¢ ğŸ˜Œ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ´Ñ‹Ñ…
            â€¢ ğŸ“ Ğ­ĞºÑĞ¿ĞµÑ€Ğ¸Ğ¼ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ Ğ²Ğ¸Ğ´Ğ°Ğ¼Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
            â€¢ ğŸ§  ĞŸĞ¾Ğ½Ğ°Ğ±Ğ»ÑĞ´Ğ°Ñ‚ÑŒ, ĞºĞ°Ğº Ğ¾Ñ‚Ğ´Ñ‹Ñ… Ğ²Ğ»Ğ¸ÑĞµÑ‚ Ğ½Ğ° Ğ²Ğ°ÑˆÑƒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ
            â€¢ ğŸ“Š ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ (/progress)
            
            *Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ±ÑƒĞ´ĞµÑ‚ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½, ĞºĞ¾Ğ³Ğ´Ğ° Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµÑ‚ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸.*
          MARKDOWN
          
          # Ğ•ÑĞ»Ğ¸ Ğ´ĞµĞ½ÑŒ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½, ĞĞ• Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½ÑƒÑ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ
          button_text = "â±ï¸ ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ Ğ”Ğ½Ñ #{next_day}"
          callback_data = "start_day_#{next_day}_from_proposal"  # ĞÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ Ñ‚Ñƒ Ğ¶Ğµ, Ğ½Ğ¾ Day7Handler Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚
        end
        
        # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
        send_message(text: message, parse_mode: 'Markdown')
        
        # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ’Ğ¡Ğ•Ğ“Ğ”Ğ, Ğ½Ğ¾ Day7Handler Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ
        send_message(
          text: "ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ:",
          reply_markup: {
            inline_keyboard: [
              [
                { 
                  text: button_text, 
                  callback_data: callback_data
                }
              ]
            ]
          }
        )
      end
      
      def resume_session
        current_state = @user.self_help_state
        
        case current_state
        when "day_#{DAY_NUMBER}_intro"
          # Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ°Ñ‡Ğ°Ğ» Ğ´ĞµĞ½ÑŒ, Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ ÑƒĞ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ğµ
          deliver_exercise
        when "day_#{DAY_NUMBER}_exercise_in_progress"
          # Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ñ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ ÑˆĞ°Ğ³Ğ°
          current_step = get_day_data('current_step')
          if current_step.present?
            handle_resume_from_step(current_step)
          else
            # Ğ•ÑĞ»Ğ¸ ÑˆĞ°Ğ³ Ğ½Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½, Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ ÑƒĞ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ğµ
            deliver_exercise
          end
        else
          # Ğ•ÑĞ»Ğ¸ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ½Ğµ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¾ Ğ¸Ğ»Ğ¸ Ğ½Ğµ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ´Ğ½Ñ 6
          log_warn("Unknown or invalid state for resume: #{current_state}")
          # ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ²Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµĞ¼ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ
          show_intro_without_state
        end
      end
      
      # ===== ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ ĞšĞĞĞŸĞĞš =====
      
      def handle_button(callback_data)
        case callback_data
        when 'start_day_6_content', 'start_day_6_from_proposal'
          deliver_exercise
          
        when 'continue_day_6_content'
          # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ğ½Ğ° ĞºĞ°ĞºĞ¾Ğ¼ ÑˆĞ°Ğ³Ğµ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ğ»ÑÑ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
          current_step = get_day_data('current_step')
          handle_resume_from_step(current_step || 'intro')
          
        when /^day_6_rest_(\d+)$/
          handle_rest_selection($1)
          
        when /^day_6_duration_(\d+)$/
          start_rest_timer($1.to_i)
          
        when 'day_6_duration_custom'
          send_message(text: "â° Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ° (Ğ¾Ñ‚ 15 Ğ´Ğ¾ 90):")
          store_day_data('awaiting_custom_duration', true)
          
        when 'day_6_rest_complete'
          complete_practice
          
        when 'day_6_rest_restart'
          deliver_exercise
          
        when 'day_6_rest_cancel'
          send_message(
            text: "âŒ ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ° Ğ¿Ñ€ĞµÑ€Ğ²Ğ°Ğ½Ğ°. Ğ’Ñ‹ Ğ²ÑĞµĞ³Ğ´Ğ° Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº Ğ½ĞµĞ¹ Ğ¿Ğ¾Ğ·Ğ¶Ğµ.",
            reply_markup: TelegramMarkupHelper.back_to_main_menu_markup
          )
          
        when /^day_6_state_(\d+)$/
          handle_state_selection($1)
          
        when 'day_6_state_describe'
          send_message(text: "ğŸ“ ĞĞ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ, ĞºĞ°Ğº Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»Ğ¾ÑÑŒ Ğ²Ğ°ÑˆĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°:")
          store_day_data('awaiting_state_description', true)
          
        when /^day_6_challenge_(\d+)$/
          handle_challenge_selection($1)
          
        when 'day_6_no_challenges'
          send_message(text: "ğŸŒŸ ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾! Ğ£ Ğ²Ğ°Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ°ÑÑŒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¸Ğ²Ğ½Ğ°Ñ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°!")
          send_message(
            text: "Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ°ĞµĞ¼ Ğ”ĞµĞ½ÑŒ 6?",
            reply_markup: day_6_final_completion_markup
          )
          
        when 'day_6_complete_exercise', 'day_6_exercise_completed'
          complete_exercise
          
        when 'day_6_restart_practice', 'day_6_add_more_rest'
          deliver_exercise
          
        when 'day_6_make_note'
          send_message(
            text: "ğŸ“ ĞĞ°Ğ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºÑƒ Ğ¾ Ğ²Ğ°ÑˆĞµĞ¹ ÑĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ĞµĞ¹ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°:\nâ€¢ Ğ§Ñ‚Ğ¾ Ğ²Ñ‹ Ğ´ĞµĞ»Ğ°Ğ»Ğ¸?\nâ€¢ ĞšĞ°ĞºĞ¸Ğµ Ğ±Ñ‹Ğ»Ğ¸ Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ñ?\nâ€¢ Ğ§Ñ‚Ğ¾ Ğ·Ğ°Ğ¼ĞµÑ‚Ğ¸Ğ»Ğ¸ Ğ² ÑĞ²Ğ¾ĞµĞ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¸ Ğ¿Ğ¾ÑĞ»Ğµ?"
          )
          store_day_data('awaiting_practice_note', true)
          
        when 'day_6_help_choose'
          send_message(
            text: "ğŸ¯ **Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ñƒ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°:**\n\nâ€¢ Ğ£ÑÑ‚Ğ°Ğ»Ğ¾ÑÑ‚ÑŒ/ÑÑ‚Ñ€ĞµÑÑ: Ğ¡Ğ¿Ğ°-Ğ¿Ñ€Ğ¾Ñ†ĞµĞ´ÑƒÑ€Ñ‹\nâ€¢ ĞœĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑƒÑÑ‚Ğ°Ğ»Ğ¾ÑÑ‚ÑŒ: Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸Ğ»Ğ¸ Ğ¼ÑƒĞ·Ñ‹ĞºĞ°\nâ€¢ Ğ¢Ğ²Ğ¾Ñ€Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ³Ğ¾Ğ»Ğ¾Ğ´: Ğ¢Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾\nâ€¢ Ğ¤Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑƒÑÑ‚Ğ°Ğ»Ğ¾ÑÑ‚ÑŒ: Ğ¡Ğ¾Ğ½/Ğ´Ñ€ĞµĞ¼Ğ¾Ñ‚Ğ°\nâ€¢ Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑÑ‚Ğ¾Ñ‰ĞµĞ½Ğ¸Ğµ: ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ñ„Ğ¸Ğ»ÑŒĞ¼Ğ°\nâ€¢ Ğ”Ğ»Ñ Ğ¾Ğ±Ñ‰ĞµĞ³Ğ¾ Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ»ĞµĞ½Ğ¸Ñ: Ğ›ÑĞ±Ğ¾Ğ¹ Ğ²Ğ¸Ğ´ Ğ½Ğ° Ğ²Ğ°Ñˆ Ğ²Ñ‹Ğ±Ğ¾Ñ€",
            parse_mode: 'Markdown'
          )
          
        else
          log_warn("Unknown button callback: #{callback_data}")
          send_message(text: "ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ°Ñ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°.")
        end
      end
      
      # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ²Ğ²Ğ¾Ğ´Ğ°
      def handle_text_input(input_text)
        # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ğ¾Ğ¹ Ğ´Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
        if get_day_data('awaiting_custom_duration')
          store_day_data('awaiting_custom_duration', false)
          
          minutes = input_text.to_i
          if minutes.between?(15, 90)
            start_rest_timer(minutes)
            return true
          else
            send_message(text: "âš ï¸ ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¾Ñ‚ 15 Ğ´Ğ¾ 90.")
            return false
          end
        end
        
        # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
        if get_day_data('awaiting_state_description')
          store_day_data('awaiting_state_description', false)
          store_day_data('state_description', input_text)
          
          send_message(text: "âœ… ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¾!")
          send_message(
            text: "ğŸ¤” *Ğ¡ ĞºĞ°ĞºĞ¸Ğ¼Ğ¸ Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ÑÑ‚ÑĞ¼Ğ¸ ÑÑ‚Ğ¾Ğ»ĞºĞ½ÑƒĞ»Ğ¸ÑÑŒ?*",
            parse_mode: 'Markdown',
            reply_markup: day_6_challenges_markup
          )
          return true
        end
        
        # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ Ğ¾ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ
        if get_day_data('awaiting_practice_note')
          store_day_data('awaiting_practice_note', false)
          store_day_data('practice_note', input_text)
          
          send_message(text: "âœ… Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ°! ĞĞ½Ğ° Ğ¿Ğ¾Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ğ°Ğ¼ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ.")
          send_message(
            text: "Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ°ĞµĞ¼ Ğ”ĞµĞ½ÑŒ 6?",
            reply_markup: day_6_final_completion_markup
          )
          return true
        end
        
        false
      end
      
      private
      
      # Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ‚ĞºĞ¸
      def day_6_content_markup
        {
          inline_keyboard: [
            [
              { text: "ğŸ˜Œ ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°", callback_data: 'start_day_6_content' }
            ],
            [
              { text: "#{EMOJI[:back]} Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğ² Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ", callback_data: 'back_to_main_menu' }
            ]
          ]
        }.to_json
      end
      
      def day_6_rest_types_markup
        {
          inline_keyboard: [
            [
              { text: "ğŸ¬ Ğ Ğ°ÑÑĞ»Ğ°Ğ±Ğ»ÑÑÑ‰Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€", callback_data: "day_6_rest_0" },
              { text: "ğŸ“š Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ ÑƒĞ´Ğ¾Ğ²Ğ¾Ğ»ÑŒÑÑ‚Ğ²Ğ¸Ñ", callback_data: "day_6_rest_1" }
            ],
            [
              { text: "ğŸµ ĞœÑƒĞ·Ñ‹ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ñ‚ĞµÑ€Ğ°Ğ¿Ğ¸Ñ", callback_data: "day_6_rest_2" },
              { text: "ğŸ›€ Ğ¡Ğ¿Ğ°-Ğ¿Ñ€Ğ¾Ñ†ĞµĞ´ÑƒÑ€Ñ‹ Ğ´Ğ¾Ğ¼Ğ°", callback_data: "day_6_rest_3" }
            ],
            [
              { text: "ğŸ¨ Ğ¢Ğ²Ğ¾Ñ€Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ", callback_data: "day_6_rest_4" },
              { text: "ğŸ’¤ Ğ¡Ğ¾Ğ½ Ğ¸Ğ»Ğ¸ Ğ´Ñ€ĞµĞ¼Ğ¾Ñ‚Ğ°", callback_data: "day_6_rest_5" }
            ],
            [
              { text: "â“ ĞŸĞ¾Ğ¼Ğ¾Ğ³Ğ¸Ñ‚Ğµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ", callback_data: "day_6_help_choose" }
            ]
          ]
        }.to_json
      end
      
      def day_6_duration_markup
        {
          inline_keyboard: [
            [
              { text: "â±ï¸ 20 Ğ¼Ğ¸Ğ½ÑƒÑ‚", callback_data: "day_6_duration_20" },
              { text: "â±ï¸ 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚", callback_data: "day_6_duration_30" }
            ],
            [
              { text: "â±ï¸ 45 Ğ¼Ğ¸Ğ½ÑƒÑ‚", callback_data: "day_6_duration_45" },
              { text: "â±ï¸ 60 Ğ¼Ğ¸Ğ½ÑƒÑ‚", callback_data: "day_6_duration_60" }
            ],
            [
              { text: "â° Ğ¡Ğ²Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ", callback_data: "day_6_duration_custom" }
            ]
          ]
        }.to_json
      end
      
      def day_6_rest_completion_markup
        {
          inline_keyboard: [
            [
              { text: "âœ… Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºÑƒ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°", callback_data: 'day_6_rest_complete' }
            ],
            [
              { text: "ğŸ”„ Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ²Ğ¸Ğ´ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°", callback_data: 'day_6_rest_restart' },
              { text: "âŒ ĞŸÑ€ĞµÑ€Ğ²Ğ°Ñ‚ÑŒ", callback_data: 'day_6_rest_cancel' }
            ]
          ]
        }.to_json
      end
      
      def day_6_state_changes_markup
        {
          inline_keyboard: [
            [
              { text: "ğŸ˜Š Ğ—Ğ½Ğ°Ñ‡Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ, Ğ¿Ñ€Ğ¸Ğ»Ğ¸Ğ² ÑĞ¸Ğ»", callback_data: 'day_6_state_0' }
            ],
            [
              { text: "ğŸ™‚ ĞĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ, Ğ±Ğ¾Ğ»ĞµĞµ Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ»ĞµĞ½(Ğ°)", callback_data: 'day_6_state_1' }
            ],
            [
              { text: "ğŸ˜ Ğ‘ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹, Ğ½Ğ¾ Ğ¿Ñ€Ğ¸ÑÑ‚Ğ½Ğ¾", callback_data: 'day_6_state_2' }
            ],
            [
              { text: "ğŸ˜” Ğ£ÑÑ‚Ğ°Ğ»(Ğ°) Ğ¸Ğ»Ğ¸ Ğ½Ğµ Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ¸Ğ»ÑÑ(Ğ°ÑÑŒ)", callback_data: 'day_6_state_3' }
            ],
            [
              { text: "ğŸ“ ĞĞ¿Ğ¸ÑˆĞ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ", callback_data: 'day_6_state_describe' }
            ]
          ]
        }.to_json
      end
      
      def day_6_challenges_markup
        {
          inline_keyboard: [
            [
              { text: "ğŸ˜” Ğ§ÑƒĞ²ÑÑ‚Ğ²Ğ¾ Ğ²Ğ¸Ğ½Ñ‹ Ğ·Ğ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…", callback_data: 'day_6_challenge_0' }
            ],
            [
              { text: "ğŸ’­ ĞĞµ Ğ¼Ğ¾Ğ³Ñƒ Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ğµ Ğ¼Ñ‹ÑĞ»Ğ¸", callback_data: 'day_6_challenge_1' }
            ],
            [
              { text: "â° ĞĞµÑ‚ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ½Ğ° Ğ¾Ñ‚Ğ´Ñ‹Ñ…", callback_data: 'day_6_challenge_2' }
            ],
            [
              { text: "ğŸ¤” ĞĞµ Ğ·Ğ½Ğ°Ñ, ĞºĞ°Ğº Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°Ñ‚ÑŒ", callback_data: 'day_6_challenge_3' }
            ],
            [
              { text: "âœ… ĞĞ¸ĞºĞ°ĞºĞ¸Ñ… Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ÑÑ‚ĞµĞ¹", callback_data: 'day_6_no_challenges' }
            ]
          ]
        }.to_json
      end
      
      def day_6_final_completion_markup
        {
          inline_keyboard: [
            [
              { text: "âœ… Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ Ğ”ĞµĞ½ÑŒ 6", callback_data: 'day_6_complete_exercise' },
              { text: "ğŸ”„ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞµÑ‰Ğµ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°", callback_data: 'day_6_add_more_rest' }
            ],
            [
              { text: "ğŸ“ Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¼ĞµÑ‚ĞºÑƒ", callback_data: 'day_6_make_note' }
            ]
          ]
        }.to_json
      end

      def show_intro_without_state
        send_message(text: DAY_STEPS['intro'][:title], parse_mode: 'Markdown')
        send_message(text: DAY_STEPS['intro'][:instruction], parse_mode: 'Markdown')
        send_message(
          text: statistics_message,
          parse_mode: 'Markdown'
        )
        send_message(
          text: "Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹ Ğ¾ÑĞ²Ğ¾Ğ¸Ñ‚ÑŒ Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ¾ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°?",
          reply_markup: day_6_content_markup
        )
      end
      
      def handle_resume_from_step(step)
        case step
        when 'intro'
          deliver_intro
        when 'exercise_explanation'
          deliver_exercise
        when 'practice_guidance'
          show_practice_guidance
        when 'post_practice_reflection'
          show_post_practice_reflection
        else
          deliver_intro
        end
      end
      
      def statistics_message
        <<~MARKDOWN
          ğŸ“Š *ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ¾Ñ‚Ğ´Ñ‹Ñ… Ñ‚Ğ°Ğº Ğ²Ğ°Ğ¶ĞµĞ½ Ğ´Ğ»Ñ Ğ¿ÑĞ¸Ñ…Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ:*
          
          â€¢ ğŸ˜Œ **40%** â€” ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ñ€Ğ¸ÑĞºĞ° ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ³Ğ¾Ñ€Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¸ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾Ğ¼ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğµ
          â€¢ ğŸ§  **30%** â€” ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ ĞºÑ€ĞµĞ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¿Ğ¾ÑĞ»Ğµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°
          â€¢ ğŸ˜Š **35%** â€” Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ ÑƒĞ´Ğ¾Ğ²Ğ»ĞµÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¶Ğ¸Ğ·Ğ½ÑŒÑ Ñƒ Ğ»ÑĞ´ĞµĞ¹, ÑƒĞ¼ĞµÑÑ‰Ğ¸Ñ… Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°Ñ‚ÑŒ
          â€¢ ğŸ›¡ï¸ **50%** â€” ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ ÑƒÑ€Ğ¾Ğ²Ğ½Ñ ÑÑ‚Ñ€ĞµÑÑĞ° Ğ¿Ñ€Ğ¸ Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ğ¾Ğ¼ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğµ 3 Ñ€Ğ°Ğ·Ğ° Ğ² Ğ½ĞµĞ´ĞµĞ»Ñ
          â€¢ ğŸ’¡ **25%** â€” ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾Ñ‚Ğ´Ñ‹Ñ…Ğ°
          â€¢ ğŸ”‹ **40%** â€” ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ğ°ÑĞ° Ğ¿ÑĞ¸Ñ…Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸
          
          *Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº: Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ĞĞ¼ĞµÑ€Ğ¸ĞºĞ°Ğ½ÑĞºĞ¾Ğ¹ Ğ¿ÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ°ÑÑĞ¾Ñ†Ğ¸Ğ°Ñ†Ğ¸Ğ¸, Harvard Business Review*
        MARKDOWN
      end
      
      def save_rest_practice_stats(duration, rest_name, state_change)
        begin
          # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑĞ°
          store_day_data('rest_practice_stats', {
            date: Date.current.to_s,
            duration: duration,
            rest_type: rest_name,
            state_change: state_change,
            completed: true
          })
        rescue => e
          log_error("Failed to save rest practice stats", e)
        end
      end
      
      def log_error(message, error = nil)
        Rails.logger.error "[#{self.class}] #{message} - User: #{@user.telegram_id}"
        Rails.logger.error error.message if error
      end
      
      def log_warn(message)
        Rails.logger.warn "[#{self.class}] #{message} - User: #{@user.telegram_id}"
      end
    end
  end
end