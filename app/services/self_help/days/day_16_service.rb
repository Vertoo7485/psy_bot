# app/services/self_help/days/day_16_service.rb
module SelfHelp
  module Days
    class Day16Service < DayBaseService
      include TelegramMarkupHelper
      
      # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
      DAY_NUMBER = 16
      
      # –¢–∏–ø—ã —Å–≤—è–∑–µ–π –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
      CONNECTION_TYPES = {
        'close_friend' => {
          emoji: 'ü§ó',
          description: '–ë–ª–∏–∑–∫–∏–π –¥—Ä—É–≥, —Å –∫–æ—Ç–æ—Ä—ã–º –¥–∞–≤–Ω–æ –Ω–µ –æ–±—â–∞–ª–∏—Å—å',
          examples: ['–®–∫–æ–ª—å–Ω—ã–π –¥—Ä—É–≥', '–ë—ã–≤—à–∏–π –∫–æ–ª–ª–µ–≥–∞', '–°–æ—Å–µ–¥ –ø–æ –æ–±—â–µ–∂–∏—Ç–∏—é']
        },
        'family' => {
          emoji: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',
          description: '–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫, —Å –∫–æ—Ç–æ—Ä—ã–º —Å—Ç–æ–∏–ª–æ –±—ã –ø–æ–æ–±—â–∞—Ç—å—Å—è —á–∞—â–µ',
          examples: ['–î–≤–æ—é—Ä–æ–¥–Ω—ã–π –±—Ä–∞—Ç/—Å–µ—Å—Ç—Ä–∞', '–¢–µ—Ç—è/–¥—è–¥—è', '–ë–∞–±—É—à–∫–∞/–¥–µ–¥—É—à–∫–∞']
        },
        'mentor' => {
          emoji: 'üßë‚Äçüè´',
          description: '–ß–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –≤–∞—Å –≤–¥–æ—Ö–Ω–æ–≤–ª—è–ª –∏–ª–∏ —É—á–∏–ª',
          examples: ['–ë—ã–≤—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å', '–ù–∞—Å—Ç–∞–≤–Ω–∏–∫', '–ö–æ–ª–ª–µ–≥–∞-—Å–æ–≤–µ—Ç–Ω–∏–∫']
        },
        'activity_friend' => {
          emoji: 'üéØ',
          description: '–î—Ä—É–≥ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º –∏–ª–∏ —Ö–æ–±–±–∏',
          examples: ['–î—Ä—É–≥ –ø–æ —Å–ø–æ—Ä—Ç—É', '–ö–æ–ª–ª–µ–≥–∞ –ø–æ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤—É', '–ü–∞—Ä—Ç–Ω–µ—Ä –ø–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è–º']
        },
        'supportive' => {
          emoji: 'ü´Ç',
          description: '–ß–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –≤—Å–µ–≥–¥–∞ –≤–∞—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª',
          examples: ['–¢–æ—Ç, –∫—Ç–æ –ø–æ–º–æ–≥ –≤ —Ç—Ä—É–¥–Ω—ã–π –º–æ–º–µ–Ω—Ç', '–°–ª—É—à–∞—Ç–µ–ª—å', '–°–æ–≤–µ—Ç—á–∏–∫']
        }
      }.freeze
      
      # –®–∞–≥–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
      EXERCISE_STEPS = {
        'intro' => {
          title: "üåâ –î–µ–Ω—å 16: –ú–æ—Å—Ç —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è üåâ",
          instruction: <<~MARKDOWN
            üß† –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:

              –ù–∞—É–∫–∞ –æ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–≤—è–∑—è—Ö:
            üß¨ –ì–µ–Ω–µ—Ç–∏–∫–∞: –õ—é–¥–∏ —Å —Å–∏–ª—å–Ω–æ–π —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∂–∏–≤—É—Ç –¥–æ–ª—å—à–µ
            üß™ –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è: –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ —Å–Ω–∏–∂–∞–µ—Ç —Ä–∏—Å–∫ –¥–µ–ø—Ä–µ—Å—Å–∏–∏ –Ω–∞ 32%
            üí° –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è: –ö–∞–∂–¥–∞—è –∑–Ω–∞—á–∏–º–∞—è —Å–≤—è–∑—å ‚Äî —ç—Ç–æ —Ä–µ—Å—É—Ä—Å –≤ —Ç—Ä—É–¥–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚ö†Ô∏è –ú–∏—Ñ—ã –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤—è–∑–µ–π:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚ùå ¬´–û–Ω–∏, –Ω–∞–≤–µ—Ä–Ω–æ–µ, –∑–∞–±—ã–ª–∏ –æ–±–æ –º–Ω–µ¬ª
            ‚ùå ¬´–£ –Ω–∏—Ö —Å–≤–æ—è –∂–∏–∑–Ω—å, –Ω–µ –±—É–¥—É –º–µ—à–∞—Ç—å¬ª
            ‚ùå ¬´–ù–µ –∑–Ω–∞—é, –æ —á–µ–º –≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ—Å–ª–µ —Å—Ç–æ–ª—å–∫–∏—Ö –ª–µ—Ç¬ª
            ‚ùå ¬´–ú–Ω–µ –Ω–µ—á–µ–≥–æ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏¬ª

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üéØ –°–µ–≥–æ–¥–Ω—è –º—ã:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            1Ô∏è‚É£ –í—Å–ø–æ–º–Ω–∏–º —Ü–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏
            2Ô∏è‚É£ –ó–∞–ª–∞–Ω–∏—Ä—É–µ–º –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
            3Ô∏è‚É£ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å–≤—è–∑—å
            4Ô∏è‚É£ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –æ–ø—ã—Ç

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚ùì –ì–æ—Ç–æ–≤—ã –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–æ—Å—Ç—ã?
          MARKDOWN
        },
        'reflection' => {
          title: "üìù –®–∞–≥ 1: –ö–∞—Ä—Ç–∞ —Å–≤—è–∑–µ–π",
          instruction: <<~MARKDOWN
            ü§î –í—Å–ø–æ–º–Ω–∏—Ç–µ –ª—é–¥–µ–π –∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–æ—à–ª–æ–≥–æ:

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ü§ó –ë–ª–∏–∑–∫–∏–µ –¥—Ä—É–∑—å—è
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚Ä¢ –° –∫–µ–º –¥–µ–ª–∏–ª–∏—Å—å —Å–∞–º—ã–º–∏ —Å–æ–∫—Ä–æ–≤–µ–Ω–Ω—ã–º–∏ –º—ã—Å–ª—è–º–∏?
            ‚Ä¢ –ö—Ç–æ –∑–Ω–∞–ª –≤–∞—Å ¬´–Ω–∞—Å—Ç–æ—è—â–µ–≥–æ¬ª?
            ‚Ä¢ –° –∫–µ–º –ø—Ä–æ—à–ª–∏ —á–µ—Ä–µ–∑ –≤–∞–∂–Ω—ã–µ —ç—Ç–∞–ø—ã –∂–∏–∑–Ω–∏?

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üë®‚Äçüë©‚Äçüëß‚Äçüë¶ –†–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥—É—à–∏
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚Ä¢ –ö—Ç–æ –≤—Å–µ–≥–¥–∞ –≤–µ—Ä–∏–ª –≤ –≤–∞—Å?
            ‚Ä¢ –ß—å–µ –º–Ω–µ–Ω–∏–µ –±—ã–ª–æ –¥–ª—è –≤–∞—Å –≤–∞–∂–Ω–æ?
            ‚Ä¢ –ö—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –≤ —Ç—Ä—É–¥–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã?

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üßë‚Äçüè´ –ù–∞—Å—Ç–∞–≤–Ω–∏–∫–∏ –∏ –≤–¥–æ—Ö–Ω–æ–≤–∏—Ç–µ–ª–∏
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚Ä¢ –ö—Ç–æ –≤–∞—Å —É—á–∏–ª –∏–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª—è–ª?
            ‚Ä¢ –ß—å–∏–º –ø—Ä–∏–º–µ—Ä–æ–º –≤–æ—Å—Ö–∏—â–∞–ª–∏—Å—å?
            ‚Ä¢ –£ –∫–æ–≥–æ –ø–µ—Ä–µ–Ω–∏–º–∞–ª–∏ –æ–ø—ã—Ç?

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚úçÔ∏è –ù–∞–ø–∏—à–∏—Ç–µ 3-5 –∏–º–µ–Ω –ª—é–¥–µ–π,
               —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —Ö–æ—Ç–µ–ª–∏ –±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤—è–∑—å:
          MARKDOWN
        },
        'planning' => {
          title: "üéØ –®–∞–≥ 2: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—â–µ–Ω–∏—è",
          instruction: <<~MARKDOWN
            üì± –ö–∞–∫ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–≤—è–∑–∞—Ç—å—Å—è?

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üìû –ó–≤–æ–Ω–æ–∫ (—Å–∞–º—ã–π –ª–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç):
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üëç –ü–ª—é—Å—ã: –ñ–∏–≤–æ–µ –æ–±—â–µ–Ω–∏–µ, —ç–º–æ—Ü–∏–∏, —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç—å
            üëé –ú–∏–Ω—É—Å—ã: –¢—Ä–µ–±—É–µ—Ç —Å–º–µ–ª–æ—Å—Ç–∏, –º–æ–∂–µ—Ç –∑–∞—Å—Ç–∞—Ç—å –≤—Ä–∞—Å–ø–ª–æ—Ö

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ (–Ω–∞–∏–±–æ–ª–µ–µ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ):
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üëç –ü–ª—é—Å—ã: –ú–æ–∂–Ω–æ –æ–±–¥—É–º–∞—Ç—å —Å–ª–æ–≤–∞, —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è
            üëé –ú–∏–Ω—É—Å—ã: –ú–µ–Ω—å—à–µ —ç–º–æ—Ü–∏–π, –º–æ–∂–Ω–æ –æ—Ç–∫–ª–∞–¥—ã–≤–∞—Ç—å –æ—Ç–≤–µ—Ç

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚úâÔ∏è –ü–∏—Å—å–º–æ (–¥–ª—è –≥–ª—É–±–æ–∫–∏—Ö —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π):
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üëç –ü–ª—é—Å—ã: –ú–æ–∂–Ω–æ –≤—ã—Ä–∞–∑–∏—Ç—å –≤—Å–µ –º—ã—Å–ª–∏, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
            üëé –ú–∏–Ω—É—Å—ã: –î–æ–ª–≥–æ –ø–∏—à–µ—Ç—Å—è, –º–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üéØ –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –∏ —Ñ–æ—Ä–º–∞—Ç –æ–±—â–µ–Ω–∏—è:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚úçÔ∏è –ù–∞–ø–∏—à–∏—Ç–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
            –ò–º—è - –§–æ—Ä–º–∞—Ç (–∑–≤–æ–Ω–æ–∫/—Å–æ–æ–±—â–µ–Ω–∏–µ/–ø–∏—Å—å–º–æ)
            
            –ü—Ä–∏–º–µ—Ä: "–ê–Ω–Ω–∞ - —Å–æ–æ–±—â–µ–Ω–∏–µ"
          MARKDOWN
        },
        'preparation' => {
          title: "üí¨ –®–∞–≥ 3: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ–±—â–µ–Ω–∏—é",
          instruction: <<~MARKDOWN
            üß† –ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –Ω–µ–ª–æ–≤–∫–æ?

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚úÖ –£–¥–∞—á–Ω—ã–µ –Ω–∞—á–∞–ª–∞:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ¬´–ü—Ä–∏–≤–µ—Ç! –ù–µ–¥–∞–≤–Ω–æ –≤—Å–ø–æ–º–∏–Ω–∞–ª(–∞) –æ —Ç–µ–±–µ –∏ —Ä–µ—à–∏–ª(–∞) –Ω–∞–ø–∏—Å–∞—Ç—å¬ª
            ¬´–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π! –ö–∞–∫ —Ç–≤–æ–∏ –¥–µ–ª–∞? –î–∞–≤–Ω–æ –Ω–µ –æ–±—â–∞–ª–∏—Å—å¬ª
            ¬´–ü—Ä–∏–≤–µ—Ç! –°–ª—É—á–∞–π–Ω–æ –Ω–∞—Ç–∫–Ω—É–ª—Å—è(–∞—Å—å) –Ω–∞ –Ω–∞—à–∏ —Å—Ç–∞—Ä—ã–µ —Ñ–æ—Ç–æ –∏ —É–ª—ã–±–Ω—É–ª—Å—è(–∞—Å—å)¬ª

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚ùå –ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            –ò–∑–≤–∏–Ω–µ–Ω–∏–π –∑–∞ –¥–æ–ª–≥–æ–µ –º–æ–ª—á–∞–Ω–∏–µ
            –ñ–∞–ª–æ–± –Ω–∞ –∂–∏–∑–Ω—å –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º
            –°—Ä–∞–≤–Ω–µ–Ω–∏–π ¬´–∞ –ø–æ–º–Ω–∏—à—å, –∫–∞–∫ —Ä–∞–Ω—å—à–µ...¬ª

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üí° –¢–µ–º—ã –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚Ä¢ –ö–∞–∫ –¥–µ–ª–∞? –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ –∂–∏–∑–Ω–∏?
            ‚Ä¢ –ß–µ–º —Å–µ–π—á–∞—Å —É–≤–ª–µ–∫–∞–µ—Ç–µ—Å—å/–∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å?
            ‚Ä¢ –í—Å–ø–æ–º–Ω–∏—Ç—å –æ–±—â–∏–π –ø—Ä–∏—è—Ç–Ω—ã–π –º–æ–º–µ–Ω—Ç
            ‚Ä¢ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–π –Ω–æ–≤–æ—Å—Ç—å—é –æ —Å–µ–±–µ

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚úçÔ∏è –ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à–µ –Ω–∞—á–∞–ª–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞:
          MARKDOWN
        },
        'execution' => {
          title: "üöÄ –®–∞–≥ 4: –í—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å!",
          instruction: <<~MARKDOWN
            ‚è∞ –ò–¥–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Å–≤—è–∑–∏:

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üìÖ –ö–æ–≥–¥–∞ –ª—É—á—à–µ –∑–≤–æ–Ω–∏—Ç—å/–ø–∏—Å–∞—Ç—å:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üïí 18:00-21:00 ‚Äî –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã, –Ω–æ –¥–æ —Å–Ω–∞
            üóìÔ∏è –°—Ä–µ–¥–∞-–ø—è—Ç–Ω–∏—Ü–∞ ‚Äî —Å–µ—Ä–µ–¥–∏–Ω–∞/–∫–æ–Ω–µ—Ü –Ω–µ–¥–µ–ª–∏
            üå§Ô∏è –í—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å ‚Äî –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ–±—â–µ–Ω–∏–µ

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üí° –°–æ–≤–µ—Ç—ã –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üéØ –ë—É–¥—å—Ç–µ –∏—Å–∫—Ä–µ–Ω–Ω–∏–º–∏ –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º–∏
            üëÇ –ë–æ–ª—å—à–µ —Å–ª—É—à–∞–π—Ç–µ, —á–µ–º –≥–æ–≤–æ—Ä–∏—Ç–µ
            üòä –£–ª—ã–±–∞–π—Ç–µ—Å—å (–¥–∞–∂–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö —ç—Ç–æ —á—É–≤—Å—Ç–≤—É–µ—Ç—Å—è!)
            ‚è≥ –ù–µ —Å–ø–µ—à–∏—Ç–µ ‚Äî –¥–∞–π—Ç–µ –≤—Ä–µ–º—è –Ω–∞ –æ—Ç–≤–µ—Ç

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚úÖ –ö–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ, –Ω–∞–ø–∏—à–∏—Ç–µ:
            "‚úÖ –°–≤—è–∑–∞–ª—Å—è(–∞—Å—å)!"
          MARKDOWN
        },
        'reflection_after' => {
          title: "üí≠ –®–∞–≥ 5: –†–µ—Ñ–ª–µ–∫—Å–∏—è –ø–æ—Å–ª–µ –æ–±—â–µ–Ω–∏—è",
          instruction: <<~MARKDOWN
            üßò –ö–∞–∫ –ø—Ä–æ—à–ª–æ –æ–±—â–µ–Ω–∏–µ?

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ü§î –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            1. üåü –ß—Ç–æ –±—ã–ª–æ —Å–∞–º—ã–º –ø—Ä–∏—è—Ç–Ω—ã–º –≤ –æ–±—â–µ–Ω–∏–∏?
            2. üé≠ –ö–∞–∫–∏–µ —ç–º–æ—Ü–∏–∏ –≤—ã –∏—Å–ø—ã—Ç–∞–ª–∏?
            3. üîó –ß—É–≤—Å—Ç–≤—É–µ—Ç—Å—è –ª–∏ –ø—Ä–µ–∂–Ω—è—è —Å–≤—è–∑—å?
            4. üí° –ß—Ç–æ —É–∑–Ω–∞–ª–∏ –Ω–æ–≤–æ–≥–æ –æ —á–µ–ª–æ–≤–µ–∫–µ/—Å–µ–±–µ?
            5. üìÖ –•–æ—Ç–∏—Ç–µ –ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—â–µ–Ω–∏–µ?

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üìù –ù–∞–ø–∏—à–∏—Ç–µ 3-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ –≤–∞—à–µ–º –æ–ø—ã—Ç–µ:
          MARKDOWN
        },
        'integration' => {
          title: "üîÑ –®–∞–≥ 6: –°–æ—Ü–∏–∞–ª—å–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞",
          instruction: <<~MARKDOWN
            üåê –ö–∞–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–≤—è–∑–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ?

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üìÖ –ï–∂–µ–º–µ—Å—è—á–Ω—ã–π —Ä–∏—Ç—É–∞–ª:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üìû 1 –∑–≤–æ–Ω–æ–∫ —Å—Ç–∞—Ä–æ–º—É –¥—Ä—É–≥—É
            üí¨ 2 —Å–æ–æ–±—â–µ–Ω–∏—è —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏
            üéÇ –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –¥–Ω–µ–º —Ä–æ–∂–¥–µ–Ω–∏—è
            üì∏ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ä–æ–π —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ñ–æ—Ç–æ

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üóìÔ∏è –ö–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–µ —Ü–µ–ª–∏:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üë• –í—Å—Ç—Ä–µ—á–∞ —Å 1-2 —Å—Ç–∞—Ä—ã–º–∏ –¥—Ä—É–∑—å—è–º–∏
            ‚úâÔ∏è –ù–∞–ø–∏—Å–∞–Ω–∏–µ 1 –±–ª–∞–≥–æ–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∏—Å—å–º–∞
            üé™ –£—á–∞—Å—Ç–∏–µ –≤ –æ–±—â–µ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            üí° –ü—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:
            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚Ä¢ –û—Ç–º–µ—á–∞–π—Ç–µ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –≤–∞–∂–Ω—ã–µ –¥–∞—Ç—ã –¥—Ä—É–∑–µ–π
            ‚Ä¢ –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ –æ –ª—é–¥—è—Ö
            ‚Ä¢ –†–µ–∞–≥–∏—Ä—É–π—Ç–µ –Ω–∞ —Å—Ç–æ—Ä–∏—Å/–ø–æ—Å—Ç—ã –¥—Ä—É–∑–µ–π
            ‚Ä¢ –î–µ–ª–∏—Ç–µ—Å—å —Ç–µ–º, —á—Ç–æ –Ω–∞–ø–æ–º–Ω–∏–ª–æ –æ —á–µ–ª–æ–≤–µ–∫–µ

            ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
            ‚ú® –ù–∞–ø–∏—à–∏—Ç–µ, –∫–∞–∫—É—é –ø—Ä–∞–∫—Ç–∏–∫—É 
               –≤—ã –≤–æ–∑—å–º–µ—Ç–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–≤—è–∑–µ–π:
          MARKDOWN
        }
      }.freeze
      
      # ===== –û–°–ù–û–í–ù–´–ï –ú–ï–¢–û–î–´ =====
      
      def deliver_intro
  message_text = <<~MARKDOWN
    ü§ù –î–µ–Ω—å 16: –ò—Å–∫—É—Å—Å—Ç–≤–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π ü§ù
    
    –ü–æ—á–µ–º—É –º—ã —Ç–µ—Ä—è–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã, —Ö–æ—Ç—è —Ü–µ–Ω–∏–º –ª—é–¥–µ–π?
    
    1. –í—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞—Ä–∞–¥–æ–∫—Å:
    üï∞Ô∏è ¬´–°–µ–π—á–∞—Å –Ω–µ–∫–æ–≥–¥–∞¬ª ‚Üí ¬´–£–∂–µ –ø—Ä–æ—à–ª–æ –ø–æ–ª–≥–æ–¥–∞¬ª ‚Üí ¬´–°–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ¬ª
    
    2. –≠—Ñ—Ñ–µ–∫—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏:
    üìç –ü–µ—Ä–µ–µ–∑–¥, —Å–º–µ–Ω–∞ —Ä–∞–±–æ—Ç—ã, —Ä–∞–∑–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç –±–∞—Ä—å–µ—Ä—ã
    
    3. –°–∏–Ω–¥—Ä–æ–º –ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏—Å—Ç–∞:
    üé≠ ¬´–ù—É–∂–µ–Ω –∏–¥–µ–∞–ª—å–Ω—ã–π –ø–æ–≤–æ–¥¬ª ‚Üí ¬´–ü–æ–≤–æ–¥–∞ –Ω–µ—Ç¬ª ‚Üí ¬´–ù–µ –ø–∏—à—É¬ª
    
    4. –°—Ç—Ä–∞—Ö –Ω–µ–ª–æ–≤–∫–æ—Å—Ç–∏:
    üò∞ ¬´–ê –≤–¥—Ä—É–≥ –∏–º –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ?¬ª ‚Üí ¬´–õ—É—á—à–µ –Ω–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å¬ª
    
    –•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å: 95% –ª—é–¥–µ–π —Ä–∞–¥—ã, –∫–æ–≥–¥–∞ —Å –Ω–∏–º–∏ —Å–≤—è–∑—ã–≤–∞—é—Ç—Å—è —Å—Ç–∞—Ä—ã–µ –¥—Ä—É–∑—å—è!
  MARKDOWN
  
  send_message(text: message_text, parse_mode: 'Markdown')
  
  @user.set_self_help_step("day_#{DAY_NUMBER}_intro")
  
  # –ò–ó–ú–ï–ù–ï–ù–ò–ï 1: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –∏–∑ TelegramMarkupHelper
  send_message(
    text: "–ì–æ—Ç–æ–≤—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏?",
    reply_markup: TelegramMarkupHelper.day_16_start_exercise_markup
  )
end
      
      def deliver_exercise
        @user.set_self_help_step("day_#{DAY_NUMBER}_exercise_in_progress")
        clear_day_data
        
        exercise_text = <<~MARKDOWN
          üåâ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ: –ú–æ—Å—Ç —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è üåâ

          –°—Ç—Ä—É–∫—Ç—É—Ä–∞: 6 —à–∞–≥–æ–≤ –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π

          –ü—Ä–∏–Ω—Ü–∏–ø—ã:
          1. üíñ –ò—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –∫—Ä–∞—Å–Ω–æ—Ä–µ—á–∏—è
          2. ‚è≥ –ù–µ —Ç–æ—Ä–æ–ø–∏—Ç–µ—Å—å ‚Äî —É–≤–∞–∂–∞–π—Ç–µ —Ä–∏—Ç–º –¥—Ä—É–≥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞
          3. üéÅ –§–æ–∫—É—Å –Ω–∞ –¥–∞—Ä–µ –æ–±—â–µ–Ω–∏—è, –∞ –Ω–µ –Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–∏
          4. üå± –ö–∞–∂–¥–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Å–µ–º—è –±—É–¥—É—â–µ–π —Å–≤—è–∑–∏
        MARKDOWN
        
        send_message(text: exercise_text, parse_mode: 'Markdown')
        
        # –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–≤—ã–π —à–∞–≥
        start_connection_step('intro')
      end
      
      def complete_exercise
  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∞–∫—Ç–∏–∫—É
  save_connection_practice
  
  @user.set_self_help_step("day_#{DAY_NUMBER}_completed")
  
  completion_message = <<~MARKDOWN
    üéä–î–µ–Ω—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π –∑–∞–≤–µ—Ä—à–µ–Ω! üéä

    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    üèÜ –í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    ‚úÖ –û—Å–æ–∑–Ω–∞–ª–∏ —Ü–µ–Ω–Ω–æ—Å—Ç—å —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–≤—è–∑–µ–π
    üìù –°–æ—Å—Ç–∞–≤–∏–ª–∏ –∫–∞—Ä—Ç—É –∑–Ω–∞—á–∏–º—ã—Ö –ª—é–¥–µ–π
    üéØ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
    üöÄ –°–¥–µ–ª–∞–ª–∏ –ø–µ—Ä–≤—ã–π —à–∞–≥ –∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é
    üí≠ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –æ–ø—ã—Ç
    üîÑ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ –∂–∏–∑–Ω—å

    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    üí° –ü–æ–º–Ω–∏—Ç–µ:
    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    ‚Ä¢ –ö–∞–∂–¥–∞—è —Å–≤—è–∑—å ‚Äî —ç—Ç–æ –∂–∏–≤–æ–π –æ—Ä–≥–∞–Ω–∏–∑–º
    ‚Ä¢ –û–±—â–µ–Ω–∏–µ –ø–∏—Ç–∞–µ—Ç –¥—É—à—É, –∫–∞–∫ –≤–æ–¥–∞ ‚Äî —Ä–∞—Å—Ç–µ–Ω–∏–µ
    ‚Ä¢ –í—ã –Ω–µ ¬´–±–µ—Å–ø–æ–∫–æ–∏—Ç–µ¬ª –ª—é–¥–µ–π ‚Äî –≤—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç–µ, —á—Ç–æ –æ–Ω–∏ –≤–∞–∂–Ω—ã
    ‚Ä¢ –î–∞–∂–µ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —á–µ–π-—Ç–æ –¥–µ–Ω—å

    –ú—É–¥—Ä–æ—Å—Ç—å –Ω–∞ –±—É–¥—É—â–µ–µ:
    "–î—Ä—É–∂–±–∞ ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ü–µ–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–∫—Ä–µ–ø–∏—Ç –º–∏—Ä." ‚Äî –í—É–¥—Ä–æ –í–∏–ª—å—Å–æ–Ω
  MARKDOWN
  
  send_message(text: completion_message, parse_mode: 'Markdown')
  
  # –í–ê–ñ–ù–û: –î–æ–±–∞–≤–ª—è–µ–º –º–µ–Ω—é –¥–Ω—è 16 –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
  send_message(
    text: "üìö –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏ –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–≤—è–∑—è—Ö!",
    reply_markup: day_16_menu_markup
  )
  
  # –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
  propose_next_day
end
      
      def handle_connection_input(input_text)
        current_step = get_day_data('current_step')
        
        return false if input_text.blank?
        
        case current_step
        when 'intro'
          # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏
          store_day_data('current_step', 'reflection')
          start_connection_step('reflection')
          return true
          
        when 'reflection'
          # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–º–µ–Ω–∞ –ª—é–¥–µ–π
          names = input_text.split(',').map(&:strip)
          
          if names.length >= 1
            store_day_data('people_to_reconnect', names)
            store_day_data('current_step', 'planning')
            start_connection_step('planning')
            return true
          else
            send_message(text: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ —Ö–æ—Ç—è –±—ã 1 –∏–º—è.")
            return false
          end
          
        when 'planning'
          # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –∏ —Ñ–æ—Ä–º–∞—Ç
          match = input_text.match(/(.+)\s*-\s*(–∑–≤–æ–Ω–æ–∫|—Å–æ–æ–±—â–µ–Ω–∏–µ|–ø–∏—Å—å–º–æ)/i)
          
          if match
            person = match[1].strip
            format = match[2].downcase
            
            store_day_data('chosen_person', person)
            store_day_data('communication_format', format)
            store_day_data('current_step', 'preparation')
            start_connection_step('preparation')
            return true
          else
            send_message(text: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: –ò–º—è - —Ñ–æ—Ä–º–∞—Ç (–∑–≤–æ–Ω–æ–∫/—Å–æ–æ–±—â–µ–Ω–∏–µ/–ø–∏—Å—å–º–æ)")
            return false
          end
          
        when 'preparation'
          # –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
          store_day_data('conversation_start', input_text)
          store_day_data('current_step', 'execution')
          start_connection_step('execution')
          return true
          
        when 'execution'
          # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
          if input_text.downcase.include?('—Å–≤—è–∑–∞–ª—Å—è') || input_text.downcase.include?('–≥–æ—Ç–æ–≤–æ') || input_text == '‚úÖ'
            store_day_data('execution_confirmed', true)
            store_day_data('current_step', 'reflection_after')
            start_connection_step('reflection_after')
            return true
          else
            send_message(text: "–ö–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ, –Ω–∞–ø–∏—à–∏—Ç–µ '‚úÖ –°–≤—è–∑–∞–ª—Å—è(–∞—Å—å)!'")
            return false
          end
          
        when 'reflection_after'
          # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ—Ñ–ª–µ–∫—Å–∏—é
          store_day_data('reflection_after', input_text)
          store_day_data('current_step', 'integration')
          start_connection_step('integration')
          return true
          
        when 'integration'
          # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É
          store_day_data('integration_practice', input_text)
          
          # –í—Å–µ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
          send_message(
            text: "‚ú® –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ —à–∞–≥–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π! ‚ú®\n\n–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ:",
            reply_markup: day_16_exercise_completed_markup
          )
          return true
        end
        
        false
      end
      
      def show_previous_practices
  practices = @user.reconnection_practices.order(created_at: :desc)
  
  if practices.empty?
    send_message(
      text: "üì≠ –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–≤—è–∑—è—Ö.\n\n–ù–∞—á–Ω–∏—Ç–µ —Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–Ω—è 16, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å!",
      reply_markup: day_16_menu_markup
    )
    return
  end
  
  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 10 –∑–∞–ø–∏—Å–µ–π
  message = "üìö –í–∞—à–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏:\n\n"
  
  practices.limit(10).each_with_index do |practice, index|
    message += "#{index + 1}. *#{practice.reconnected_person}*\n"
    message += "   üìÖ #{practice.entry_date.strftime('%d.%m.%Y')}\n"
    message += "   #{format_emoji(practice.communication_format)} #{practice.communication_format.capitalize}\n"
    
    if practice.reflection_text.present?
      message += "   üí≠ #{practice.reflection_text.truncate(50)}\n"
    end
    
    message += "\n"
  end
  
  if practices.count > 10
    message += "\n...–∏ –µ—â–µ #{practices.count - 10} –∑–∞–ø–∏—Å–µ–π.\n"
    message += "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏."
  end
  
  send_message(
    text: message,
    parse_mode: 'Markdown',
    reply_markup: reconnection_history_markup
  )
end
      
      def ask_for_input_again
        current_step = get_day_data('current_step')
        start_connection_step(current_step) if current_step
      end

      def show_reconnection_stats
  practices = @user.reconnection_practices
  
  if practices.empty?
    send_message(text: "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.")
    return
  end
  
  # –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  total = practices.count
  calls = practices.by_format('–∑–≤–æ–Ω–æ–∫').count
  messages = practices.by_format('—Å–æ–æ–±—â–µ–Ω–∏–µ').count
  letters = practices.by_format('–ø–∏—Å—å–º–æ').count
  
  # –ü–æ –º–µ—Å—è—Ü–∞–º
  this_month = practices.this_month.count
  last_month = practices.where(
    entry_date: 1.month.ago.beginning_of_month..1.month.ago.end_of_month
  ).count
  
  # –£—Ä–æ–≤–Ω–∏ —É—Å–ø–µ—Ö–∞
  beginner = practices.select { |p| p.success_score <= 1 }.count
  good = practices.select { |p| p.success_score.between?(2, 3) }.count
  excellent = practices.select { |p| p.success_score == 4 }.count
  
  stats_message = <<~MARKDOWN
    üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    üìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    üìÖ –í—Å–µ–≥–æ –ø—Ä–∞–∫—Ç–∏–∫: #{total}
    üìû –ó–≤–æ–Ω–∫–æ–≤: #{calls} (#{(calls.to_f/total100).round}%)
    üí¨ –°–æ–æ–±—â–µ–Ω–∏–π: #{messages} (#{(messages.to_f/total100).round}%)
    ‚úâÔ∏è –ü–∏—Å–µ–º: #{letters} (#{(letters.to_f/total*100).round}%)

    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    üóìÔ∏è –ü–æ –º–µ—Å—è—Ü–∞–º:
    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    üìÖ –≠—Ç–æ—Ç –º–µ—Å—è—Ü: #{this_month}
    üìÖ –ü—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü: #{last_month}
    üìà –î–∏–Ω–∞–º–∏–∫–∞: #{this_month > last_month ? '‚Üë —Ä–æ—Å—Ç' : this_month < last_month ? '‚Üì —Å–ø–∞–¥' : '‚Üí —Å—Ç–∞–±–∏–ª—å–Ω–æ'}

    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    ‚≠ê –£—Ä–æ–≤–Ω–∏ —É—Å–ø–µ—Ö–∞:
    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    üü° –ù–∞—á–∞–ª–æ: #{beginner} –ø—Ä–∞–∫—Ç–∏–∫
    üü¢ –•–æ—Ä–æ—à–æ: #{good} –ø—Ä–∞–∫—Ç–∏–∫
    üî¥ –û—Ç–ª–∏—á–Ω–æ: #{excellent} –ø—Ä–∞–∫—Ç–∏–∫

    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
    #{generate_recommendations(calls, messages, letters, beginner, good, excellent)}
  MARKDOWN
  
  send_message(text: stats_message, parse_mode: 'Markdown')
  send_message(text: "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:", reply_markup: reconnection_stats_markup)
end

def generate_recommendations(calls, messages, letters, beginner, good, excellent)
  recommendations = []
  
  if calls < messages && calls < letters
    recommendations << "‚Ä¢ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –±–æ–ª—å—à–µ –∑–≤–æ–Ω–∫–æ–≤ ‚Äî –æ–Ω–∏ –¥–∞—é—Ç –±–æ–ª—å—à–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å–≤—è–∑–∏"
  end
  
  if beginner > good + excellent
    recommendations << "‚Ä¢ –£–¥–µ–ª—è–π—Ç–µ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –ø–æ—Å–ª–µ –æ–±—â–µ–Ω–∏—è"
  end
  
  if excellent < (beginner + good) / 2
    recommendations << "‚Ä¢ –ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –ø—Ä–∞–∫—Ç–∏–∫ –≤ —Ä–µ–≥—É–ª—è—Ä–Ω—É—é –∂–∏–∑–Ω—å"
  end
  
  recommendations.empty? ? "–û—Ç–ª–∏—á–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏! –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!" : recommendations.join("\n")
end
      
      # ===== –ü–†–ò–í–ê–¢–ù–´–ï –ú–ï–¢–û–î–´ =====
      
      private

      def format_emoji(format)
        case format
        when '–∑–≤–æ–Ω–æ–∫' then 'üìû'
        when '—Å–æ–æ–±—â–µ–Ω–∏–µ' then 'üí¨'
        when '–ø–∏—Å—å–º–æ' then '‚úâÔ∏è'
        else 'üì±'
        end
      end

      def reconnection_history_markup
  {
    inline_keyboard: [
      [
        { text: "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", callback_data: 'reconnection_stats' },
        { text: "üìÖ –ü–æ –¥–∞—Ç–µ", callback_data: 'reconnection_by_date' }
      ],
      [
        { text: "üìû –¢–æ–ª—å–∫–æ –∑–≤–æ–Ω–∫–∏", callback_data: 'reconnection_calls_only' },
        { text: "üí¨ –¢–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è", callback_data: 'reconnection_messages_only' }
      ],
      [
        { text: "üéØ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏", callback_data: 'reconnection_best' },
        { text: "üîÑ –ù–æ–≤–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞", callback_data: 'start_day_16_exercise' }
      ],
      [
        { text: "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data: 'back_to_main_menu' }
      ]
    ]
  }.to_json
end

def reconnection_stats_markup
  {
    inline_keyboard: [
      [
        { text: "üìà –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", callback_data: 'reconnection_general_stats' },
        { text: "üìÖ –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", callback_data: 'reconnection_monthly_stats' }
      ],
      [
        { text: "üìä –§–æ—Ä–º–∞—Ç—ã –æ–±—â–µ–Ω–∏—è", callback_data: 'reconnection_format_stats' },
        { text: "‚≠ê –£—Ä–æ–≤–Ω–∏ —É—Å–ø–µ—Ö–∞", callback_data: 'reconnection_success_stats' }
      ],
      [
        { text: "üìã –ù–∞–∑–∞–¥ –∫ –∑–∞–ø–∏—Å—è–º", callback_data: 'view_reconnection_history' },
        { text: "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data: 'back_to_main_menu' }
      ]
    ]
  }.to_json
end
      
      def start_connection_step(step_type)
        store_day_data('current_step', step_type)
        
        step = EXERCISE_STEPS[step_type]
        return unless step
        
        send_message(text: step[:title], parse_mode: 'Markdown')
        send_message(text: step[:instruction])
      end
      
      def save_connection_practice
  begin
    ReconnectionPractice.create!(
      user: @user,
      entry_date: Date.current,
      reconnected_person: get_day_data('chosen_person') || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
      communication_format: get_day_data('communication_format') || '—Å–æ–æ–±—â–µ–Ω–∏–µ',
      conversation_start: get_day_data('conversation_start') || '',
      reflection_text: get_day_data('reflection_after') || '',
      integration_plan: get_day_data('integration_practice') || ''
    )
    
    log_info("Connection practice saved successfully")
    
    # –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –ø–µ—Ä–≤—É—é –ø—Ä–∞–∫—Ç–∏–∫—É
    award_first_reconnection_badge
    
  rescue => e
    log_error("Failed to save connection practice", e)
    
    # –§–æ–ª–±—ç–∫: —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ self_help_data
    store_day_data('connection_practice_saved_fallback', true)
    store_day_data('practice_completed_at', Time.current.to_s)
  end
end

def award_first_reconnection_badge
  # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–µ—Ä–≤–∞—è –ª–∏ —ç—Ç–æ –ø—Ä–∞–∫—Ç–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
  practice_count = @user.reconnection_practices.count
  
  if practice_count == 1
    send_message(
      text: "üèÜ –í—ã –ø–æ–ª—É—á–∏–ª–∏ –±–µ–π–¥–∂!\n\n" \
            "üéñÔ∏è –ü–µ—Ä–≤—ã–π –º–æ—Å—Ç\n" \
            "–í—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —Å–≤–æ—é –ø–µ—Ä–≤—É—é —Å–≤—è–∑—å!\n\n" \
            "–≠—Ç–∞ –º–∞–ª–µ–Ω—å–∫–∞—è –ø–æ–±–µ–¥–∞ ‚Äî –Ω–∞—á–∞–ª–æ –±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –≤–∞—à–µ–π —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏.",
      parse_mode: 'Markdown'
    )
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∞–∫—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –±–µ–π–¥–∂–∞
    @user.store_self_help_data('badge_first_reconnection', true)
  end
end
      
      def day_16_start_exercise_markup
  TelegramMarkupHelper.day_16_start_exercise_markup
end
      
      def day_16_exercise_completed_markup
  TelegramMarkupHelper.day_16_exercise_completed_markup
end
      
      def day_16_menu_markup
  TelegramMarkupHelper.day_16_menu_markup
end
    end
  end
end